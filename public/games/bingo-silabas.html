<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bingo de S√≠labas - EAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2rem;
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            color: rgba(255,255,255,0.7);
            font-size: 0.9rem;
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .stat {
            background: rgba(255,255,255,0.1);
            padding: 10px 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 80px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e91e63;
        }

        .stat-label {
            font-size: 0.7rem;
            color: rgba(255,255,255,0.6);
            text-transform: uppercase;
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 40px;
        }

        .start-btn {
            display: block;
            width: 100%;
            max-width: 300px;
            margin: 15px auto;
            padding: 20px;
            border: none;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .start-btn.easy {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
        }

        .start-btn.medium {
            background: linear-gradient(135deg, #ff9800, #ffc107);
        }

        .start-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .start-btn small {
            display: block;
            font-weight: normal;
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 5px;
        }

        /* Game Area */
        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        /* Called Syllable */
        .called-syllable {
            text-align: center;
            margin-bottom: 30px;
        }

        .called-syllable h3 {
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .syllable-display {
            font-size: 5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: pulse 1s ease-in-out;
        }

        .syllable-example {
            margin-top: 10px;
            color: rgba(255,255,255,0.5);
            font-size: 0.9rem;
        }

        @keyframes pulse {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Bingo Card */
        .bingo-card {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .bingo-title {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.2rem;
            color: #e91e63;
        }

        .bingo-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .bingo-cell {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            text-transform: uppercase;
        }

        .bingo-cell:hover {
            background: rgba(255,255,255,0.2);
            transform: scale(1.05);
        }

        .bingo-cell.marked {
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            border-color: #e91e63;
            animation: mark 0.3s ease;
        }

        .bingo-cell.wrong {
            background: rgba(244, 67, 54, 0.3);
            border-color: #f44336;
            animation: shake 0.3s;
        }

        .bingo-cell.bingo-win {
            background: linear-gradient(135deg, #ffc107, #ff9800);
            animation: glow 0.5s ease infinite alternate;
        }

        @keyframes mark {
            0% { transform: scale(0.8); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px #ffc107; }
            to { box-shadow: 0 0 30px #ffc107; }
        }

        /* Actions */
        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .btn-call {
            background: linear-gradient(135deg, #e91e63, #9c27b0);
        }

        .btn-new {
            background: linear-gradient(135deg, #4caf50, #8bc34a);
        }

        .btn-menu {
            background: rgba(255,255,255,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Called List */
        .called-list {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .called-list h4 {
            text-align: center;
            margin-bottom: 10px;
            color: rgba(255,255,255,0.6);
            font-size: 0.85rem;
        }

        .called-syllables {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
        }

        .called-item {
            background: rgba(255,255,255,0.1);
            padding: 5px 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        /* Win Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 24px;
            padding: 40px;
            text-align: center;
            max-width: 400px;
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffc107, #ff9800);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .modal-text {
            color: rgba(255,255,255,0.7);
            margin-bottom: 20px;
        }

        .modal-stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .modal-stat {
            background: rgba(255,255,255,0.1);
            padding: 15px 20px;
            border-radius: 12px;
        }

        .modal-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #e91e63;
        }

        .modal-stat-label {
            font-size: 0.75rem;
            color: rgba(255,255,255,0.6);
        }

        /* Medals */
        .medals-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .medal {
            font-size: 2rem;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .medal.earned {
            opacity: 1;
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        /* Responsive */
        @media (max-width: 500px) {
            .header h1 {
                font-size: 1.5rem;
            }

            .bingo-grid {
                gap: 6px;
            }

            .bingo-cell {
                font-size: 1.2rem;
            }

            .syllable-display {
                font-size: 3.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Bingo de S√≠labas</h1>
            <p>Encontre as s√≠labas na sua cartela!</p>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Pontos</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="wins">0</div>
                <div class="stat-label">Vit√≥rias</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Sequ√™ncia</div>
            </div>
        </div>

        <!-- Start Screen -->
        <div class="start-screen" id="startScreen">
            <h2 style="margin-bottom: 30px;">Escolha o N√≠vel</h2>

            <button class="start-btn easy" onclick="startGame('easy')">
                üåü S√≠labas Simples
                <small>BA, CA, DA, FA... (1¬∫ ano)</small>
            </button>

            <button class="start-btn medium" onclick="startGame('medium')">
                ‚≠ê S√≠labas Complexas
                <small>BRA, CHA, LHA, NHA... (2¬∫ ano)</small>
            </button>

            <div class="medals-container" style="margin-top: 30px;">
                <span class="medal" id="medal1" title="Primeiro Bingo">ü•â</span>
                <span class="medal" id="medal2" title="5 Bingos">ü•à</span>
                <span class="medal" id="medal3" title="10 Bingos">ü•á</span>
                <span class="medal" id="medal4" title="Mestre do Bingo">üèÜ</span>
                <span class="medal" id="medal5" title="Lenda">üëë</span>
            </div>
        </div>

        <!-- Game Area -->
        <div class="game-area" id="gameArea">
            <!-- Called Syllable -->
            <div class="called-syllable">
                <h3>S√≠laba Sorteada:</h3>
                <div class="syllable-display" id="currentSyllable">-</div>
                <div class="syllable-example" id="syllableExample"></div>
            </div>

            <!-- Bingo Card -->
            <div class="bingo-card">
                <div class="bingo-title">üé¥ Sua Cartela</div>
                <div class="bingo-grid" id="bingoGrid">
                    <!-- Cells will be generated -->
                </div>
            </div>

            <!-- Actions -->
            <div class="actions">
                <button class="btn btn-call" id="btnCall" onclick="callSyllable()">
                    üé≤ Sortear S√≠laba
                </button>
                <button class="btn btn-new" onclick="newCard()">
                    üîÑ Nova Cartela
                </button>
                <button class="btn btn-menu" onclick="backToMenu()">
                    üè† Menu
                </button>
            </div>

            <!-- Called List -->
            <div class="called-list">
                <h4>S√≠labas j√° sorteadas:</h4>
                <div class="called-syllables" id="calledList">
                    <!-- Called syllables will appear here -->
                </div>
            </div>
        </div>

        <!-- Win Modal -->
        <div class="modal" id="winModal">
            <div class="modal-content">
                <div class="modal-icon">üéâ</div>
                <div class="modal-title">BINGO!</div>
                <div class="modal-text">Parab√©ns! Voc√™ completou uma linha!</div>

                <div class="modal-stats">
                    <div class="modal-stat">
                        <div class="modal-stat-value" id="modalScore">0</div>
                        <div class="modal-stat-label">Pontos</div>
                    </div>
                    <div class="modal-stat">
                        <div class="modal-stat-value" id="modalCalls">0</div>
                        <div class="modal-stat-label">Sorteios</div>
                    </div>
                </div>

                <div class="actions">
                    <button class="btn btn-new" onclick="newCard(); closeModal();">
                        üîÑ Nova Cartela
                    </button>
                    <button class="btn btn-menu" onclick="backToMenu(); closeModal();">
                        üè† Menu
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Syllable database
        const syllables = {
            easy: {
                syllables: [
                    'BA', 'BE', 'BI', 'BO', 'BU',
                    'CA', 'CE', 'CI', 'CO', 'CU',
                    'DA', 'DE', 'DI', 'DO', 'DU',
                    'FA', 'FE', 'FI', 'FO', 'FU',
                    'GA', 'GE', 'GI', 'GO', 'GU',
                    'JA', 'JE', 'JI', 'JO', 'JU',
                    'LA', 'LE', 'LI', 'LO', 'LU',
                    'MA', 'ME', 'MI', 'MO', 'MU',
                    'NA', 'NE', 'NI', 'NO', 'NU',
                    'PA', 'PE', 'PI', 'PO', 'PU',
                    'RA', 'RE', 'RI', 'RO', 'RU',
                    'SA', 'SE', 'SI', 'SO', 'SU',
                    'TA', 'TE', 'TI', 'TO', 'TU',
                    'VA', 'VE', 'VI', 'VO', 'VU',
                    'XA', 'XE', 'XI', 'XO', 'XU',
                    'ZA', 'ZE', 'ZI', 'ZO', 'ZU'
                ],
                examples: {
                    'BA': 'bola', 'BE': 'beb√™', 'BI': 'bico', 'BO': 'bolo', 'BU': 'burro',
                    'CA': 'casa', 'CE': 'cedo', 'CI': 'cidade', 'CO': 'cola', 'CU': 'cubo',
                    'DA': 'dado', 'DE': 'dedo', 'DI': 'dia', 'DO': 'dois', 'DU': 'duro',
                    'FA': 'fada', 'FE': 'festa', 'FI': 'figo', 'FO': 'foca', 'FU': 'fumo',
                    'GA': 'gato', 'GE': 'gelo', 'GI': 'giro', 'GO': 'gota', 'GU': 'gula',
                    'JA': 'jato', 'JE': 'jeca', 'JI': 'jipe', 'JO': 'jogo', 'JU': 'juba',
                    'LA': 'lago', 'LE': 'leve', 'LI': 'lima', 'LO': 'lobo', 'LU': 'lua',
                    'MA': 'mapa', 'ME': 'mesa', 'MI': 'mico', 'MO': 'moto', 'MU': 'mula',
                    'NA': 'nave', 'NE': 'neve', 'NI': 'ninho', 'NO': 'n√≥', 'NU': 'nuca',
                    'PA': 'pato', 'PE': 'pena', 'PI': 'pipa', 'PO': 'pote', 'PU': 'puma',
                    'RA': 'rato', 'RE': 'remo', 'RI': 'rico', 'RO': 'roda', 'RU': 'rua',
                    'SA': 'sala', 'SE': 'selo', 'SI': 'sino', 'SO': 'sof√°', 'SU': 'sumo',
                    'TA': 'tatu', 'TE': 'teto', 'TI': 'tia', 'TO': 'toca', 'TU': 'tubo',
                    'VA': 'vaca', 'VE': 'vela', 'VI': 'vida', 'VO': 'vov√≥', 'VU': 'vulto',
                    'XA': 'xale', 'XE': 'xerox', 'XI': 'x√≠cara', 'XO': 'xod√≥', 'XU': 'xuxa',
                    'ZA': 'zaga', 'ZE': 'zebra', 'ZI': 'zinco', 'ZO': 'zona', 'ZU': 'zuzu'
                }
            },
            medium: {
                syllables: [
                    'BLA', 'BLE', 'BLI', 'BLO', 'BLU',
                    'BRA', 'BRE', 'BRI', 'BRO', 'BRU',
                    'CLA', 'CLE', 'CLI', 'CLO', 'CLU',
                    'CRA', 'CRE', 'CRI', 'CRO', 'CRU',
                    'DRA', 'DRE', 'DRI', 'DRO', 'DRU',
                    'FLA', 'FLE', 'FLI', 'FLO', 'FLU',
                    'FRA', 'FRE', 'FRI', 'FRO', 'FRU',
                    'GLA', 'GLE', 'GLI', 'GLO', 'GLU',
                    'GRA', 'GRE', 'GRI', 'GRO', 'GRU',
                    'PLA', 'PLE', 'PLI', 'PLO', 'PLU',
                    'PRA', 'PRE', 'PRI', 'PRO', 'PRU',
                    'TRA', 'TRE', 'TRI', 'TRO', 'TRU',
                    'CHA', 'CHE', 'CHI', 'CHO', 'CHU',
                    'LHA', 'LHE', 'LHI', 'LHO', 'LHU',
                    'NHA', 'NHE', 'NHI', 'NHO', 'NHU'
                ],
                examples: {
                    'BLA': 'blusa', 'BLE': 'blefe', 'BLI': 'blindar', 'BLO': 'bloco', 'BLU': 'blue',
                    'BRA': 'bra√ßo', 'BRE': 'breve', 'BRI': 'brilho', 'BRO': 'broto', 'BRU': 'bruto',
                    'CLA': 'claro', 'CLE': 'clero', 'CLI': 'clima', 'CLO': 'clone', 'CLU': 'clube',
                    'CRA': 'cravo', 'CRE': 'creme', 'CRI': 'crime', 'CRO': 'croar', 'CRU': 'cruz',
                    'DRA': 'drama', 'DRE': 'dreno', 'DRI': 'drive', 'DRO': 'droga', 'DRU': 'drupa',
                    'FLA': 'flama', 'FLE': 'flexa', 'FLI': 'flipe', 'FLO': 'flora', 'FLU': 'fluir',
                    'FRA': 'frase', 'FRE': 'frevo', 'FRI': 'frio', 'FRO': 'frota', 'FRU': 'fruta',
                    'GLA': 'glac√™', 'GLE': 'gleba', 'GLI': 'glide', 'GLO': 'globo', 'GLU': 'glute',
                    'GRA': 'grama', 'GRE': 'greve', 'GRI': 'grilo', 'GRO': 'grota', 'GRU': 'grupo',
                    'PLA': 'plano', 'PLE': 'pleno', 'PLI': 'plica', 'PLO': 'plote', 'PLU': 'plugar',
                    'PRA': 'prato', 'PRE': 'preto', 'PRI': 'primo', 'PRO': 'prova', 'PRU': 'prumo',
                    'TRA': 'tra√ßo', 'TRE': 'tr√™s', 'TRI': 'trigo', 'TRO': 'troca', 'TRU': 'truco',
                    'CHA': 'chave', 'CHE': 'chefe', 'CHI': 'china', 'CHO': 'choro', 'CHU': 'chuva',
                    'LHA': 'malha', 'LHE': 'bilhete', 'LHI': 'brilho', 'LHO': 'filho', 'LHU': 'galhu',
                    'NHA': 'minha', 'NHE': 'nhenhe', 'NHI': 'nhim', 'NHO': 'sonho', 'NHU': 'nhumu'
                }
            }
        };

        // Game state
        let currentDifficulty = 'easy';
        let cardSyllables = [];
        let markedCells = [];
        let calledSyllables = [];
        let availableSyllables = [];
        let score = 0;
        let wins = 0;
        let streak = 0;
        let gameOver = false;

        // Audio
        let audioCtx = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            initAudio();
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);

            switch(type) {
                case 'call':
                    oscillator.frequency.setValueAtTime(440, audioCtx.currentTime);
                    oscillator.frequency.setValueAtTime(550, audioCtx.currentTime + 0.1);
                    gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.2);
                    break;
                case 'mark':
                    oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
                    gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.1);
                    break;
                case 'wrong':
                    oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);
                    gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.15);
                    break;
                case 'bingo':
                    const notes = [523, 659, 784, 1047];
                    notes.forEach((freq, i) => {
                        const osc = audioCtx.createOscillator();
                        const gain = audioCtx.createGain();
                        osc.connect(gain);
                        gain.connect(audioCtx.destination);
                        osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.15);
                        gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.15);
                        osc.start(audioCtx.currentTime + i * 0.15);
                        osc.stop(audioCtx.currentTime + i * 0.15 + 0.15);
                    });
                    break;
            }
        }

        // Shuffle array
        function shuffle(array) {
            const arr = [...array];
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        // Load progress
        function loadProgress() {
            const saved = localStorage.getItem('bingoSilabasProgress');
            if (saved) {
                const data = JSON.parse(saved);
                score = data.score || 0;
                wins = data.wins || 0;
                streak = data.streak || 0;
                updateMedals();
            }
            updateDisplay();
        }

        // Save progress
        function saveProgress() {
            localStorage.setItem('bingoSilabasProgress', JSON.stringify({
                score, wins, streak
            }));
        }

        // Update display
        function updateDisplay() {
            document.getElementById('score').textContent = score;
            document.getElementById('wins').textContent = wins;
            document.getElementById('streak').textContent = streak;
        }

        // Update medals
        function updateMedals() {
            const thresholds = [1, 5, 10, 25, 50];
            for (let i = 0; i < 5; i++) {
                const medal = document.getElementById(`medal${i + 1}`);
                if (wins >= thresholds[i]) {
                    medal.classList.add('earned');
                }
            }
        }

        // Start game
        function startGame(difficulty) {
            currentDifficulty = difficulty;
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameArea').classList.add('active');

            generateCard();
        }

        // Generate bingo card
        function generateCard() {
            const data = syllables[currentDifficulty];
            availableSyllables = [...data.syllables];
            cardSyllables = shuffle([...data.syllables]).slice(0, 16);
            markedCells = new Array(16).fill(false);
            calledSyllables = [];
            gameOver = false;

            // Render grid
            const grid = document.getElementById('bingoGrid');
            grid.innerHTML = '';

            cardSyllables.forEach((syllable, index) => {
                const cell = document.createElement('div');
                cell.className = 'bingo-cell';
                cell.textContent = syllable;
                cell.onclick = () => markCell(index);
                grid.appendChild(cell);
            });

            // Reset display
            document.getElementById('currentSyllable').textContent = '-';
            document.getElementById('syllableExample').textContent = '';
            document.getElementById('calledList').innerHTML = '';
            document.getElementById('btnCall').disabled = false;
        }

        // Call syllable
        function callSyllable() {
            if (gameOver || availableSyllables.length === 0) return;

            playSound('call');

            // Pick random syllable
            const randomIndex = Math.floor(Math.random() * availableSyllables.length);
            const syllable = availableSyllables.splice(randomIndex, 1)[0];
            calledSyllables.push(syllable);

            // Display
            const display = document.getElementById('currentSyllable');
            display.textContent = syllable;
            display.style.animation = 'none';
            setTimeout(() => display.style.animation = 'pulse 1s ease-in-out', 10);

            // Show example
            const example = syllables[currentDifficulty].examples[syllable];
            document.getElementById('syllableExample').textContent = example ? `Ex: ${example}` : '';

            // Add to called list
            const calledList = document.getElementById('calledList');
            const item = document.createElement('span');
            item.className = 'called-item';
            item.textContent = syllable;
            calledList.appendChild(item);

            // Check if no more syllables
            if (availableSyllables.length === 0) {
                document.getElementById('btnCall').disabled = true;
            }
        }

        // Mark cell
        function markCell(index) {
            if (gameOver || markedCells[index]) return;

            const syllable = cardSyllables[index];
            const cells = document.querySelectorAll('.bingo-cell');

            if (calledSyllables.includes(syllable)) {
                playSound('mark');
                markedCells[index] = true;
                cells[index].classList.add('marked');

                // Check for bingo
                checkBingo();
            } else {
                playSound('wrong');
                cells[index].classList.add('wrong');
                setTimeout(() => cells[index].classList.remove('wrong'), 300);
            }
        }

        // Check bingo
        function checkBingo() {
            const lines = [
                // Rows
                [0, 1, 2, 3],
                [4, 5, 6, 7],
                [8, 9, 10, 11],
                [12, 13, 14, 15],
                // Columns
                [0, 4, 8, 12],
                [1, 5, 9, 13],
                [2, 6, 10, 14],
                [3, 7, 11, 15],
                // Diagonals
                [0, 5, 10, 15],
                [3, 6, 9, 12]
            ];

            for (const line of lines) {
                if (line.every(i => markedCells[i])) {
                    // BINGO!
                    gameOver = true;
                    playSound('bingo');

                    // Highlight winning line
                    const cells = document.querySelectorAll('.bingo-cell');
                    line.forEach(i => cells[i].classList.add('bingo-win'));

                    // Calculate score
                    const basePoints = currentDifficulty === 'easy' ? 50 : 100;
                    const callBonus = Math.max(0, 30 - calledSyllables.length) * 5;
                    const points = basePoints + callBonus;

                    score += points;
                    wins++;
                    streak++;

                    updateDisplay();
                    updateMedals();
                    saveProgress();

                    // Show modal
                    setTimeout(() => {
                        document.getElementById('modalScore').textContent = points;
                        document.getElementById('modalCalls').textContent = calledSyllables.length;
                        document.getElementById('winModal').classList.add('show');
                    }, 500);

                    return;
                }
            }
        }

        // New card
        function newCard() {
            generateCard();
        }

        // Close modal
        function closeModal() {
            document.getElementById('winModal').classList.remove('show');
        }

        // Back to menu
        function backToMenu() {
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameArea').classList.remove('active');
        }

        // Initialize
        loadProgress();
    </script>
</body>
</html>
