<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProfissÃµes em Idiomas - EAI Games</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            overflow-x: hidden;
        }

        /* ===== VARIÃVEIS DE ESTILO ===== */
        :root {
            --style-primary: #667eea;
            --style-secondary: #764ba2;
            --style-accent: #f093fb;
        }

        .style-pixar { --style-primary: #FF6B6B; --style-secondary: #4ECDC4; --style-accent: #FFE66D; }
        .style-disney { --style-primary: #1E88E5; --style-secondary: #7B1FA2; --style-accent: #FFD54F; }
        .style-anime { --style-primary: #E91E63; --style-secondary: #9C27B0; --style-accent: #00BCD4; }
        .style-cartoon { --style-primary: #FF9800; --style-secondary: #4CAF50; --style-accent: #2196F3; }
        .style-realista { --style-primary: #455A64; --style-secondary: #37474F; --style-accent: #78909C; }

        /* ===== TELA INICIAL ===== */
        #start-screen {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--style-primary), var(--style-secondary));
            z-index: 1000;
            padding: 20px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-icon {
            font-size: 80px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .game-title {
            font-size: 36px;
            font-weight: bold;
            margin: 15px 0;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
        }

        .game-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .start-buttons {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }

        .start-btn {
            padding: 18px 50px;
            font-size: 18px;
            font-weight: bold;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-play {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
        }

        .btn-play:hover {
            transform: scale(1.1);
        }

        .btn-customize {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
        }

        .btn-shop {
            background: linear-gradient(135deg, #9C27B0, #7B1FA2);
            color: white;
        }

        .btn-how {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.5);
        }

        /* ===== CUSTOMIZAÃ‡ÃƒO ===== */
        #customize-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 900;
            padding: 20px;
            overflow-y: auto;
        }

        .customize-title {
            font-size: 28px;
            color: var(--style-accent);
            margin-bottom: 20px;
        }

        .customize-section {
            width: 100%;
            max-width: 800px;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 18px;
            color: white;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
        }

        .option-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-card:hover {
            border-color: var(--style-accent);
            transform: translateY(-3px);
        }

        .option-card.selected {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.2);
        }

        .option-card.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .option-icon {
            font-size: 40px;
            margin-bottom: 8px;
        }

        .option-name {
            font-size: 12px;
            color: white;
        }

        .option-price {
            font-size: 10px;
            color: #FFD700;
            margin-top: 5px;
        }

        .character-preview {
            width: 200px;
            height: 250px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            border: 3px solid var(--style-accent);
        }

        .preview-character {
            font-size: 100px;
        }

        .preview-name {
            font-size: 16px;
            color: white;
            margin-top: 10px;
        }

        /* ===== LOJA ===== */
        #shop-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #2c1810, #4a2c17);
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 900;
            padding: 20px;
            overflow-y: auto;
        }

        .shop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 900px;
            margin-bottom: 20px;
        }

        .shop-title {
            font-size: 28px;
            color: #FFD700;
        }

        .coins-display {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 20px;
        }

        .coins-amount {
            font-size: 20px;
            font-weight: bold;
            color: #FFD700;
        }

        .shop-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .shop-category {
            padding: 10px 25px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .shop-category.active {
            background: var(--style-accent);
            color: #1a1a2e;
        }

        .shop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            max-width: 900px;
            width: 100%;
        }

        .shop-item {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .shop-item:hover {
            border-color: #FFD700;
        }

        .shop-item.owned {
            border-color: #4CAF50;
        }

        .item-preview {
            font-size: 50px;
            margin-bottom: 10px;
        }

        .item-name {
            font-size: 14px;
            color: white;
            margin-bottom: 5px;
        }

        .item-price {
            font-size: 12px;
            color: #FFD700;
        }

        .item-owned {
            color: #4CAF50;
            font-size: 11px;
        }

        /* ===== SELEÃ‡ÃƒO DE IDIOMA ===== */
        #language-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 800;
            padding: 20px;
        }

        .language-title {
            font-size: 28px;
            color: var(--style-accent);
            margin-bottom: 30px;
        }

        .languages-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 600px;
        }

        .language-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .language-card:hover {
            border-color: var(--style-accent);
            transform: scale(1.05);
        }

        .language-flag {
            font-size: 50px;
            margin-bottom: 10px;
        }

        .language-name {
            font-size: 16px;
            color: white;
            font-weight: bold;
        }

        /* ===== SELEÃ‡ÃƒO DE PROFISSÃƒO ===== */
        #profession-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 700;
            padding: 20px;
            overflow-y: auto;
        }

        .profession-title {
            font-size: 28px;
            color: var(--style-accent);
            margin-bottom: 10px;
        }

        .profession-subtitle {
            color: rgba(255,255,255,0.7);
            margin-bottom: 25px;
        }

        .professions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            max-width: 900px;
            width: 100%;
        }

        .profession-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .profession-card:hover {
            border-color: var(--style-accent);
            transform: translateY(-5px);
        }

        .profession-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }

        .profession-name {
            font-size: 14px;
            color: white;
            font-weight: bold;
        }

        .profession-words {
            font-size: 11px;
            color: rgba(255,255,255,0.6);
            margin-top: 5px;
        }

        /* ===== SELEÃ‡ÃƒO DE FASE ===== */
        #phase-screen {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 600;
            padding: 20px;
        }

        .phases-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            max-width: 700px;
        }

        .phase-card {
            background: rgba(255,255,255,0.1);
            border: 3px solid transparent;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .phase-card:hover:not(.locked) {
            border-color: var(--style-accent);
            transform: scale(1.05);
        }

        .phase-card.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .phase-number {
            font-size: 32px;
            font-weight: bold;
            color: var(--style-accent);
        }

        .phase-name {
            font-size: 13px;
            color: white;
            margin: 8px 0;
        }

        .phase-stars {
            font-size: 16px;
        }

        /* ===== JOGO PRINCIPAL ===== */
        #game-screen {
            display: none;
            min-height: 100vh;
            padding: 20px;
            background: linear-gradient(135deg, var(--style-primary), var(--style-secondary));
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-info {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .info-box {
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-content {
            max-width: 900px;
            margin: 0 auto;
        }

        /* Ãrea do Professor */
        .teacher-area {
            background: rgba(255,255,255,0.15);
            border-radius: 25px;
            padding: 25px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .teacher-avatar {
            font-size: 80px;
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 50%;
        }

        .teacher-speech {
            flex: 1;
        }

        .speech-bubble {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 20px;
            position: relative;
            font-size: 18px;
            line-height: 1.6;
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            left: -15px;
            top: 50%;
            transform: translateY(-50%);
            border: 15px solid transparent;
            border-right-color: white;
        }

        .word-highlight {
            background: linear-gradient(135deg, var(--style-accent), var(--style-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: bold;
            font-size: 24px;
        }

        .speak-btn {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .speak-btn:hover {
            transform: scale(1.05);
        }

        /* Ãrea de Imagem */
        .image-area {
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
        }

        .word-image {
            font-size: 120px;
            margin-bottom: 15px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .word-translation {
            font-size: 24px;
            color: white;
            margin-bottom: 10px;
        }

        .word-pronunciation {
            font-size: 16px;
            color: rgba(255,255,255,0.7);
            font-style: italic;
        }

        /* Ãrea de Quiz */
        .quiz-area {
            background: rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 25px;
        }

        .quiz-question {
            font-size: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .option-btn {
            background: rgba(255,255,255,0.2);
            border: 3px solid transparent;
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .option-btn:hover {
            border-color: white;
            background: rgba(255,255,255,0.3);
        }

        .option-btn.correct {
            background: rgba(76, 175, 80, 0.5);
            border-color: #4CAF50;
        }

        .option-btn.wrong {
            background: rgba(244, 67, 54, 0.5);
            border-color: #F44336;
        }

        /* ===== FASE 9 - CONVERSA ===== */
        .conversation-area {
            background: rgba(0,0,0,0.3);
            border-radius: 25px;
            padding: 25px;
            max-width: 800px;
            margin: 0 auto;
        }

        .conversation-title {
            text-align: center;
            font-size: 20px;
            margin-bottom: 20px;
            color: var(--style-accent);
        }

        .chat-container {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }

        .chat-message {
            display: flex;
            margin-bottom: 15px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .chat-message.right {
            flex-direction: row-reverse;
        }

        .chat-avatar {
            font-size: 40px;
            margin: 0 10px;
        }

        .chat-bubble {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 20px;
            font-size: 16px;
            line-height: 1.5;
        }

        .chat-message.left .chat-bubble {
            background: rgba(255,255,255,0.2);
            border-bottom-left-radius: 5px;
        }

        .chat-message.right .chat-bubble {
            background: var(--style-accent);
            color: #1a1a2e;
            border-bottom-right-radius: 5px;
        }

        .chat-translation {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 5px;
            font-style: italic;
        }

        .response-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .response-btn {
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 15px;
            color: white;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s;
        }

        .response-btn:hover {
            background: rgba(255,255,255,0.2);
            border-color: var(--style-accent);
        }

        .response-text {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .response-translation {
            font-size: 12px;
            opacity: 0.7;
        }

        /* ===== TELA DE RESULTADO ===== */
        #result-screen {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1500;
        }

        .result-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            border: 3px solid var(--style-accent);
        }

        .result-title {
            font-size: 32px;
            margin-bottom: 20px;
        }

        .result-stars {
            font-size: 50px;
            margin-bottom: 20px;
        }

        .result-score {
            font-size: 40px;
            color: var(--style-accent);
            margin-bottom: 10px;
        }

        .result-coins {
            font-size: 20px;
            color: #FFD700;
            margin-bottom: 20px;
        }

        .result-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .result-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-next-phase {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
        }

        .btn-retry {
            background: linear-gradient(135deg, #FF9800, #F57C00);
            color: white;
        }

        .btn-menu {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        /* ===== MODAL ===== */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 25px;
            padding: 30px;
            max-width: 600px;
            max-height: 85vh;
            overflow-y: auto;
            border: 3px solid var(--style-accent);
        }

        .modal-title {
            font-size: 24px;
            color: var(--style-accent);
            text-align: center;
            margin-bottom: 20px;
        }

        .modal-section h3 {
            color: white;
            margin: 15px 0 10px;
        }

        .modal-section p, .modal-section li {
            color: rgba(255,255,255,0.8);
            line-height: 1.6;
        }

        .close-modal {
            display: block;
            margin: 20px auto 0;
            padding: 12px 40px;
            background: var(--style-accent);
            color: #1a1a2e;
            border: none;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ===== BACK BUTTON ===== */
        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(0,0,0,0.3);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            background: rgba(0,0,0,0.5);
        }

        /* ===== RESPONSIVO ===== */
        @media (max-width: 768px) {
            .languages-grid, .phases-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .teacher-area {
                flex-direction: column;
                text-align: center;
            }

            .speech-bubble::before {
                display: none;
            }

            .options-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- TELA INICIAL -->
    <div id="start-screen">
        <div class="logo-container">
            <div class="logo-icon">ğŸ‘¨â€ğŸ«</div>
            <h1 class="game-title">ProfissÃµes em Idiomas</h1>
            <p class="game-subtitle">Aprenda vocabulÃ¡rio profissional em vÃ¡rias lÃ­nguas!</p>
        </div>
        <div class="start-buttons">
            <button class="start-btn btn-play" onclick="showLanguageSelect()">â–¶ Jogar</button>
            <button class="start-btn btn-customize" onclick="showCustomize()">ğŸ¨ Personalizar</button>
            <button class="start-btn btn-shop" onclick="showShop()">ğŸ›’ Loja</button>
            <button class="start-btn btn-how" onclick="showInstructions()">ğŸ“– Como Jogar</button>
        </div>
        <div class="coins-display" style="margin-top: 30px;">
            <span style="font-size: 24px;">ğŸª™</span>
            <span class="coins-amount" id="start-coins">0</span>
        </div>
    </div>

    <!-- CUSTOMIZAÃ‡ÃƒO -->
    <div id="customize-screen">
        <button class="back-btn" onclick="showStart()">â† Voltar</button>
        <h1 class="customize-title">ğŸ¨ PersonalizaÃ§Ã£o</h1>

        <div class="character-preview">
            <div class="preview-character" id="preview-char">ğŸ‘¤</div>
            <div class="preview-name" id="preview-name">Seu Personagem</div>
        </div>

        <div class="customize-section">
            <h3 class="section-title">ğŸ­ Estilo Visual</h3>
            <div class="options-grid" id="style-options"></div>
        </div>

        <div class="customize-section">
            <h3 class="section-title">ğŸ‘¤ Personagem</h3>
            <div class="options-grid" id="character-options"></div>
        </div>

        <div class="customize-section">
            <h3 class="section-title">ğŸ‘• Roupa</h3>
            <div class="options-grid" id="outfit-options"></div>
        </div>

        <div class="customize-section">
            <h3 class="section-title">ğŸ’ AcessÃ³rio</h3>
            <div class="options-grid" id="accessory-options"></div>
        </div>

        <button class="start-btn btn-play" onclick="saveCustomization()" style="margin-top: 20px;">âœ“ Salvar</button>
    </div>

    <!-- LOJA -->
    <div id="shop-screen">
        <button class="back-btn" onclick="showStart()">â† Voltar</button>

        <div class="shop-header">
            <h1 class="shop-title">ğŸ›’ Loja</h1>
            <div class="coins-display">
                <span style="font-size: 24px;">ğŸª™</span>
                <span class="coins-amount" id="shop-coins">0</span>
            </div>
        </div>

        <div class="shop-categories">
            <button class="shop-category active" onclick="showShopCategory('characters')">ğŸ‘¤ Personagens</button>
            <button class="shop-category" onclick="showShopCategory('outfits')">ğŸ‘• Roupas</button>
            <button class="shop-category" onclick="showShopCategory('accessories')">ğŸ’ AcessÃ³rios</button>
            <button class="shop-category" onclick="showShopCategory('styles')">ğŸ¨ Estilos</button>
        </div>

        <div class="shop-grid" id="shop-items"></div>
    </div>

    <!-- SELEÃ‡ÃƒO DE IDIOMA -->
    <div id="language-screen">
        <button class="back-btn" onclick="showStart()">â† Voltar</button>
        <h1 class="language-title">ğŸŒ Escolha o Idioma</h1>
        <div class="languages-grid" id="languages-container"></div>
    </div>

    <!-- SELEÃ‡ÃƒO DE PROFISSÃƒO -->
    <div id="profession-screen">
        <button class="back-btn" onclick="showLanguageSelect()">â† Voltar</button>
        <h1 class="profession-title">ğŸ’¼ Escolha a ProfissÃ£o</h1>
        <p class="profession-subtitle" id="profession-lang-label">Aprendendo em InglÃªs</p>
        <div class="professions-grid" id="professions-container"></div>
    </div>

    <!-- SELEÃ‡ÃƒO DE FASE -->
    <div id="phase-screen">
        <button class="back-btn" onclick="showProfessionSelect()">â† Voltar</button>
        <h1 class="profession-title">ğŸ“Š Escolha a Fase</h1>
        <p class="profession-subtitle" id="phase-profession-label">MÃ©dico - InglÃªs</p>
        <div class="phases-grid" id="phases-container"></div>
    </div>

    <!-- JOGO -->
    <div id="game-screen">
        <button class="back-btn" onclick="showPhaseSelect()">â† Sair</button>

        <div class="game-header">
            <div class="game-info">
                <div class="info-box" style="background: rgba(255,255,255,0.2);">
                    <span>ğŸ“</span>
                    <span>Fase <span id="game-phase">1</span> - <span id="game-current">1</span>/<span id="game-total">7</span></span>
                </div>
                <div class="info-box">
                    <span>â­</span>
                    <span id="game-score">0</span>
                </div>
                <div class="info-box">
                    <span>â¤ï¸</span>
                    <span id="game-lives">3</span>
                </div>
                <div class="info-box" id="style-box">
                    <span id="style-icon">ğŸ¬</span>
                    <span id="style-name">Pixar</span>
                </div>
            </div>
            <div class="coins-display">
                <span>ğŸª™</span>
                <span id="game-coins">0</span>
            </div>
        </div>

        <!-- Barra de Progresso -->
        <div style="max-width: 900px; margin: 0 auto 20px; background: rgba(0,0,0,0.3); border-radius: 10px; height: 20px; overflow: hidden;">
            <div id="progress-bar" style="height: 100%; background: linear-gradient(90deg, #4CAF50, #8BC34A); width: 0%; transition: width 0.5s; border-radius: 10px;"></div>
        </div>

        <div class="game-content" id="game-content">
            <!-- ConteÃºdo dinÃ¢mico -->
        </div>
    </div>

    <!-- RESULTADO -->
    <div id="result-screen">
        <div class="result-content">
            <h2 class="result-title" id="result-title">ğŸ‰ ParabÃ©ns!</h2>
            <div class="result-stars" id="result-stars">â­â­â­</div>
            <div class="result-score">Pontos: <span id="result-score">0</span></div>
            <div class="result-coins">+<span id="result-coins">0</span> ğŸª™</div>
            <div class="result-buttons">
                <button class="result-btn btn-retry" onclick="retryPhase()">ğŸ”„ Repetir</button>
                <button class="result-btn btn-next-phase" id="btn-next-phase" onclick="nextPhase()">â¡ï¸ PrÃ³xima</button>
                <button class="result-btn btn-menu" onclick="showStart()">ğŸ  Menu</button>
            </div>
        </div>
    </div>

    <!-- MODAL DE INSTRUÃ‡Ã•ES -->
    <div class="modal-overlay" id="instructions-modal">
        <div class="modal-content">
            <h2 class="modal-title">ğŸ“– Como Jogar</h2>

            <div class="modal-section">
                <h3>ğŸ¯ Objetivo</h3>
                <p>Aprenda vocabulÃ¡rio de diversas profissÃµes em outros idiomas! Cada profissÃ£o tem 9 fases progressivas.</p>
            </div>

            <div class="modal-section">
                <h3>ğŸ“Š As 9 Fases</h3>
                <ul>
                    <li><strong>Fases 1-3:</strong> Palavras bÃ¡sicas da profissÃ£o</li>
                    <li><strong>Fases 4-6:</strong> Frases e expressÃµes</li>
                    <li><strong>Fases 7-8:</strong> DiÃ¡logos simples</li>
                    <li><strong>Fase 9:</strong> Conversa fluente com clientes!</li>
                </ul>
            </div>

            <div class="modal-section">
                <h3>ğŸ¨ PersonalizaÃ§Ã£o</h3>
                <p>Escolha seu estilo visual (Pixar, Disney, Anime...), personagem, roupa e acessÃ³rios! Compre mais itens na loja com as moedas que ganhar.</p>
            </div>

            <div class="modal-section">
                <h3>ğŸª™ Moedas</h3>
                <p>Ganhe moedas completando fases! Use para comprar personagens, roupas e estilos exclusivos.</p>
            </div>

            <div class="modal-section">
                <h3>ğŸ”Š Ãudio</h3>
                <p>Clique no botÃ£o de Ã¡udio para ouvir a pronÃºncia correta em cada idioma!</p>
            </div>

            <button class="close-modal" onclick="hideInstructions()">Entendi!</button>
        </div>
    </div>

    <script>
        // ===== DADOS DO JOGO =====
        const LANGUAGES = [
            { id: 'en', name: 'InglÃªs', flag: 'ğŸ‡¬ğŸ‡§', voice: 'en-US' },
            { id: 'es', name: 'Espanhol', flag: 'ğŸ‡ªğŸ‡¸', voice: 'es-ES' },
            { id: 'fr', name: 'FrancÃªs', flag: 'ğŸ‡«ğŸ‡·', voice: 'fr-FR' },
            { id: 'de', name: 'AlemÃ£o', flag: 'ğŸ‡©ğŸ‡ª', voice: 'de-DE' },
            { id: 'it', name: 'Italiano', flag: 'ğŸ‡®ğŸ‡¹', voice: 'it-IT' },
            { id: 'jp', name: 'JaponÃªs', flag: 'ğŸ‡¯ğŸ‡µ', voice: 'ja-JP' }
        ];

        const PROFESSIONS = {
            doctor: {
                name: { pt: 'MÃ©dico', en: 'Doctor', es: 'MÃ©dico', fr: 'MÃ©decin', de: 'Arzt', it: 'Medico', jp: 'åŒ»è€…' },
                icon: 'ğŸ‘¨â€âš•ï¸',
                words: {
                    en: [
                        // Fase 1 - 7 palavras bÃ¡sicas
                        { word: 'Patient', translation: 'Paciente', image: 'ğŸ¤’' },
                        { word: 'Medicine', translation: 'RemÃ©dio', image: 'ğŸ’Š' },
                        { word: 'Hospital', translation: 'Hospital', image: 'ğŸ¥' },
                        { word: 'Doctor', translation: 'MÃ©dico', image: 'ğŸ‘¨â€âš•ï¸' },
                        { word: 'Nurse', translation: 'Enfermeira', image: 'ğŸ‘©â€âš•ï¸' },
                        { word: 'Pain', translation: 'Dor', image: 'ğŸ˜£' },
                        { word: 'Health', translation: 'SaÃºde', image: 'ğŸ’š' },
                        // Fase 2 - 10 palavras intermediÃ¡rias
                        { word: 'Stethoscope', translation: 'EstetoscÃ³pio', image: 'ğŸ©º' },
                        { word: 'Prescription', translation: 'Receita', image: 'ğŸ“‹' },
                        { word: 'Injection', translation: 'InjeÃ§Ã£o', image: 'ğŸ’‰' },
                        { word: 'Examination', translation: 'Exame', image: 'ğŸ”¬' },
                        { word: 'Symptom', translation: 'Sintoma', image: 'ğŸ¤§' },
                        { word: 'Treatment', translation: 'Tratamento', image: 'ğŸ¨' },
                        { word: 'Diagnosis', translation: 'DiagnÃ³stico', image: 'ğŸ“Š' },
                        { word: 'Fever', translation: 'Febre', image: 'ğŸ¤’' },
                        { word: 'Headache', translation: 'Dor de cabeÃ§a', image: 'ğŸ¤•' },
                        { word: 'Pharmacy', translation: 'FarmÃ¡cia', image: 'ğŸ’Š' },
                        // Fase 3 - 15 palavras avanÃ§adas
                        { word: 'Surgery', translation: 'Cirurgia', image: 'ğŸ”ª' },
                        { word: 'Emergency', translation: 'EmergÃªncia', image: 'ğŸš¨' },
                        { word: 'Ambulance', translation: 'AmbulÃ¢ncia', image: 'ğŸš‘' },
                        { word: 'Blood', translation: 'Sangue', image: 'ğŸ©¸' },
                        { word: 'Vaccine', translation: 'Vacina', image: 'ğŸ’‰' },
                        { word: 'Bandage', translation: 'Bandagem', image: 'ğŸ©¹' },
                        { word: 'Thermometer', translation: 'TermÃ´metro', image: 'ğŸŒ¡ï¸' },
                        { word: 'X-ray', translation: 'Raio-X', image: 'ğŸ¦´' },
                        { word: 'Allergy', translation: 'Alergia', image: 'ğŸ¤§' },
                        { word: 'Infection', translation: 'InfecÃ§Ã£o', image: 'ğŸ¦ ' },
                        { word: 'Recovery', translation: 'RecuperaÃ§Ã£o', image: 'ğŸ’ª' },
                        { word: 'Wheelchair', translation: 'Cadeira de rodas', image: 'ğŸ¦½' },
                        { word: 'Cough', translation: 'Tosse', image: 'ğŸ˜·' },
                        { word: 'Appointment', translation: 'Consulta', image: 'ğŸ“…' },
                        { word: 'Laboratory', translation: 'LaboratÃ³rio', image: 'ğŸ§ª' }
                    ],
                    es: [
                        { word: 'Paciente', translation: 'Paciente', image: 'ğŸ¤’' },
                        { word: 'Medicina', translation: 'RemÃ©dio', image: 'ğŸ’Š' },
                        { word: 'Hospital', translation: 'Hospital', image: 'ğŸ¥' },
                        { word: 'Estetoscopio', translation: 'EstetoscÃ³pio', image: 'ğŸ©º' },
                        { word: 'Receta', translation: 'Receita', image: 'ğŸ“‹' },
                        { word: 'InyecciÃ³n', translation: 'InjeÃ§Ã£o', image: 'ğŸ’‰' },
                        { word: 'Examen', translation: 'Exame', image: 'ğŸ”¬' },
                        { word: 'SÃ­ntoma', translation: 'Sintoma', image: 'ğŸ¤§' },
                        { word: 'Tratamiento', translation: 'Tratamento', image: 'ğŸ¨' },
                        { word: 'DiagnÃ³stico', translation: 'DiagnÃ³stico', image: 'ğŸ“Š' }
                    ],
                    fr: [
                        { word: 'Patient', translation: 'Paciente', image: 'ğŸ¤’' },
                        { word: 'MÃ©dicament', translation: 'RemÃ©dio', image: 'ğŸ’Š' },
                        { word: 'HÃ´pital', translation: 'Hospital', image: 'ğŸ¥' },
                        { word: 'StÃ©thoscope', translation: 'EstetoscÃ³pio', image: 'ğŸ©º' },
                        { word: 'Ordonnance', translation: 'Receita', image: 'ğŸ“‹' },
                        { word: 'Injection', translation: 'InjeÃ§Ã£o', image: 'ğŸ’‰' }
                    ]
                },
                phrases: {
                    en: [
                        // Fase 4 - 7 frases bÃ¡sicas
                        { phrase: "The patient needs medicine.", translation: "O paciente precisa de remÃ©dio.", image: 'ğŸ’Š' },
                        { phrase: "Please take a deep breath.", translation: "Por favor, respire fundo.", image: 'ğŸŒ¬ï¸' },
                        { phrase: "Where does it hurt?", translation: "Onde dÃ³i?", image: 'ğŸ¤•' },
                        { phrase: "I will check your temperature.", translation: "Vou verificar sua temperatura.", image: 'ğŸŒ¡ï¸' },
                        { phrase: "How are you feeling today?", translation: "Como vocÃª estÃ¡ se sentindo hoje?", image: 'ğŸ˜Š' },
                        { phrase: "Please sit down.", translation: "Por favor, sente-se.", image: 'ğŸª‘' },
                        { phrase: "Open your mouth, please.", translation: "Abra a boca, por favor.", image: 'ğŸ‘„' },
                        // Fase 5 - 10 frases intermediÃ¡rias
                        { phrase: "Take this medicine twice a day.", translation: "Tome este remÃ©dio duas vezes ao dia.", image: 'ğŸ’Š' },
                        { phrase: "You need to rest for a week.", translation: "VocÃª precisa descansar por uma semana.", image: 'ğŸ›ï¸' },
                        { phrase: "The test results are normal.", translation: "Os resultados do exame estÃ£o normais.", image: 'ğŸ“Š' },
                        { phrase: "Do you have any allergies?", translation: "VocÃª tem alguma alergia?", image: 'ğŸ¤§' },
                        { phrase: "I need to check your blood pressure.", translation: "Preciso verificar sua pressÃ£o.", image: 'â¤ï¸' },
                        { phrase: "You should drink more water.", translation: "VocÃª deveria beber mais Ã¡gua.", image: 'ğŸ’§' },
                        { phrase: "The surgery was successful.", translation: "A cirurgia foi um sucesso.", image: 'âœ…' },
                        { phrase: "Please come back next week.", translation: "Por favor, volte semana que vem.", image: 'ğŸ“…' },
                        { phrase: "Your heart sounds healthy.", translation: "Seu coraÃ§Ã£o parece saudÃ¡vel.", image: 'â¤ï¸' },
                        { phrase: "I will prescribe some medication.", translation: "Vou prescrever alguns medicamentos.", image: 'ğŸ“‹' },
                        // Fase 6 - 15 frases avanÃ§adas
                        { phrase: "The infection is under control.", translation: "A infecÃ§Ã£o estÃ¡ sob controle.", image: 'ğŸ¦ ' },
                        { phrase: "You need to take antibiotics.", translation: "VocÃª precisa tomar antibiÃ³ticos.", image: 'ğŸ’Š' },
                        { phrase: "We need to do more tests.", translation: "Precisamos fazer mais exames.", image: 'ğŸ”¬' },
                        { phrase: "The X-ray shows no fractures.", translation: "O raio-X nÃ£o mostra fraturas.", image: 'ğŸ¦´' },
                        { phrase: "Your recovery is going well.", translation: "Sua recuperaÃ§Ã£o estÃ¡ indo bem.", image: 'ğŸ’ª' },
                        { phrase: "Avoid eating heavy meals.", translation: "Evite comer refeiÃ§Ãµes pesadas.", image: 'ğŸ½ï¸' },
                        { phrase: "The wound is healing properly.", translation: "O ferimento estÃ¡ cicatrizando bem.", image: 'ğŸ©¹' },
                        { phrase: "You should exercise regularly.", translation: "VocÃª deveria se exercitar regularmente.", image: 'ğŸƒ' },
                        { phrase: "Call me if the symptoms persist.", translation: "Me ligue se os sintomas persistirem.", image: 'ğŸ“' },
                        { phrase: "The vaccine will protect you.", translation: "A vacina vai te proteger.", image: 'ğŸ’‰' },
                        { phrase: "I recommend a specialist.", translation: "Recomendo um especialista.", image: 'ğŸ‘¨â€âš•ï¸' },
                        { phrase: "Your blood sugar is high.", translation: "Seu aÃ§Ãºcar no sangue estÃ¡ alto.", image: 'ğŸ©¸' },
                        { phrase: "Please avoid stress.", translation: "Por favor, evite estresse.", image: 'ğŸ˜Œ' },
                        { phrase: "The treatment will take time.", translation: "O tratamento vai levar tempo.", image: 'â°' },
                        { phrase: "You are in good health.", translation: "VocÃª estÃ¡ com boa saÃºde.", image: 'ğŸ’š' }
                    ],
                    es: [
                        { phrase: "El paciente necesita medicina.", translation: "O paciente precisa de remÃ©dio.", image: 'ğŸ’Š' },
                        { phrase: "Por favor, respire profundo.", translation: "Por favor, respire fundo.", image: 'ğŸŒ¬ï¸' },
                        { phrase: "Â¿DÃ³nde le duele?", translation: "Onde dÃ³i?", image: 'ğŸ¤•' },
                        { phrase: "Voy a revisar su temperatura.", translation: "Vou verificar sua temperatura.", image: 'ğŸŒ¡ï¸' },
                        { phrase: "Â¿CÃ³mo se siente hoy?", translation: "Como vocÃª estÃ¡ se sentindo hoje?", image: 'ğŸ˜Š' },
                        { phrase: "Por favor, siÃ©ntese.", translation: "Por favor, sente-se.", image: 'ğŸª‘' },
                        { phrase: "Abra la boca, por favor.", translation: "Abra a boca, por favor.", image: 'ğŸ‘„' }
                    ]
                },
                dialogues: {
                    en: [
                        {
                            context: "Consulta mÃ©dica",
                            lines: [
                                { speaker: 'patient', text: "Good morning, I have an appointment.", translation: "Bom dia, tenho uma consulta." },
                                { speaker: 'doctor', text: "Good morning! Please, have a seat.", translation: "Bom dia! Por favor, sente-se.", isQuestion: true, options: ["Good morning! Please, have a seat.", "Go away!", "I'm busy now."]},
                                { speaker: 'patient', text: "I've been having headaches.", translation: "Tenho tido dores de cabeÃ§a." },
                                { speaker: 'doctor', text: "How long have you had this symptom?", translation: "HÃ¡ quanto tempo vocÃª tem esse sintoma?", isQuestion: true, options: ["How long have you had this symptom?", "That's not serious.", "Take this pill."]}
                            ]
                        }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'patient', text: "Hello, Doctor. I'm not feeling well.", translation: "OlÃ¡, Doutor. NÃ£o estou me sentindo bem." },
                        { speaker: 'doctor', text: "What symptoms do you have?", translation: "Quais sintomas vocÃª tem?", options: [
                            { text: "What symptoms do you have?", translation: "Quais sintomas vocÃª tem?" },
                            { text: "Take this medicine.", translation: "Tome este remÃ©dio." },
                            { text: "You need surgery.", translation: "VocÃª precisa de cirurgia." }
                        ]},
                        { speaker: 'patient', text: "I have a headache and fever.", translation: "Estou com dor de cabeÃ§a e febre." },
                        { speaker: 'doctor', text: "Let me examine you.", translation: "Deixe-me examinÃ¡-lo.", options: [
                            { text: "Let me examine you.", translation: "Deixe-me examinÃ¡-lo." },
                            { text: "Go home.", translation: "VÃ¡ para casa." },
                            { text: "It's nothing.", translation: "NÃ£o Ã© nada." }
                        ]}
                    ],
                    es: [
                        { speaker: 'patient', text: "Hola, Doctor. No me siento bien.", translation: "OlÃ¡, Doutor. NÃ£o estou me sentindo bem." },
                        { speaker: 'doctor', text: "Â¿QuÃ© sÃ­ntomas tiene?", translation: "Quais sintomas vocÃª tem?", options: [
                            { text: "Â¿QuÃ© sÃ­ntomas tiene?", translation: "Quais sintomas vocÃª tem?" },
                            { text: "Tome esta medicina.", translation: "Tome este remÃ©dio." },
                            { text: "Necesita cirugÃ­a.", translation: "VocÃª precisa de cirurgia." }
                        ]}
                    ]
                }
            },
            police: {
                name: { pt: 'Policial', en: 'Police Officer', es: 'PolicÃ­a', fr: 'Policier', de: 'Polizist', it: 'Poliziotto', jp: 'è­¦å¯Ÿå®˜' },
                icon: 'ğŸ‘®',
                words: {
                    en: [
                        // Fase 1 - 7 palavras bÃ¡sicas
                        { word: 'Police', translation: 'PolÃ­cia', image: 'ğŸ‘®' },
                        { word: 'Badge', translation: 'Distintivo', image: 'ğŸªª' },
                        { word: 'Car', translation: 'Carro', image: 'ğŸš”' },
                        { word: 'Help', translation: 'Ajuda', image: 'ğŸ†˜' },
                        { word: 'Stop', translation: 'Pare', image: 'âœ‹' },
                        { word: 'Safe', translation: 'Seguro', image: 'ğŸ›¡ï¸' },
                        { word: 'Crime', translation: 'Crime', image: 'ğŸš¨' },
                        // Fase 2 - 10 palavras intermediÃ¡rias
                        { word: 'Patrol', translation: 'Patrulha', image: 'ğŸš”' },
                        { word: 'Criminal', translation: 'Criminoso', image: 'ğŸ¦¹' },
                        { word: 'Arrest', translation: 'PrisÃ£o', image: 'â›“ï¸' },
                        { word: 'Station', translation: 'Delegacia', image: 'ğŸ¢' },
                        { word: 'Evidence', translation: 'EvidÃªncia', image: 'ğŸ”' },
                        { word: 'Handcuffs', translation: 'Algemas', image: 'â›“ï¸' },
                        { word: 'Report', translation: 'RelatÃ³rio', image: 'ğŸ“' },
                        { word: 'Witness', translation: 'Testemunha', image: 'ğŸ‘ï¸' },
                        { word: 'Thief', translation: 'LadrÃ£o', image: 'ğŸ¥·' },
                        { word: 'Victim', translation: 'VÃ­tima', image: 'ğŸ˜¢' },
                        // Fase 3 - 15 palavras avanÃ§adas
                        { word: 'Investigation', translation: 'InvestigaÃ§Ã£o', image: 'ğŸ”¬' },
                        { word: 'Law', translation: 'Lei', image: 'âš–ï¸' },
                        { word: 'Safety', translation: 'SeguranÃ§a', image: 'ğŸ›¡ï¸' },
                        { word: 'Siren', translation: 'Sirene', image: 'ğŸš¨' },
                        { word: 'Uniform', translation: 'Uniforme', image: 'ğŸ‘®' },
                        { word: 'Gun', translation: 'Arma', image: 'ğŸ”«' },
                        { word: 'Prison', translation: 'PrisÃ£o', image: 'ğŸ›ï¸' },
                        { word: 'Judge', translation: 'Juiz', image: 'âš–ï¸' },
                        { word: 'Lawyer', translation: 'Advogado', image: 'ğŸ‘¨â€âš–ï¸' },
                        { word: 'Detective', translation: 'Detetive', image: 'ğŸ•µï¸' },
                        { word: 'Fingerprint', translation: 'ImpressÃ£o digital', image: 'ğŸ‘†' },
                        { word: 'Robbery', translation: 'Roubo', image: 'ğŸ’°' },
                        { word: 'Emergency', translation: 'EmergÃªncia', image: 'ğŸš¨' },
                        { word: 'Suspect', translation: 'Suspeito', image: 'ğŸ¤”' },
                        { word: 'Court', translation: 'Tribunal', image: 'ğŸ›ï¸' }
                    ],
                    es: [
                        { word: 'PolicÃ­a', translation: 'PolÃ­cia', image: 'ğŸ‘®' },
                        { word: 'Placa', translation: 'Distintivo', image: 'ğŸªª' },
                        { word: 'Coche', translation: 'Carro', image: 'ğŸš”' },
                        { word: 'Ayuda', translation: 'Ajuda', image: 'ğŸ†˜' },
                        { word: 'Pare', translation: 'Pare', image: 'âœ‹' },
                        { word: 'Seguro', translation: 'Seguro', image: 'ğŸ›¡ï¸' },
                        { word: 'Crimen', translation: 'Crime', image: 'ğŸš¨' }
                    ]
                },
                phrases: {
                    en: [
                        // Fase 4 - 7 frases bÃ¡sicas
                        { phrase: "Please show your ID.", translation: "Por favor, mostre sua identidade.", image: 'ğŸªª' },
                        { phrase: "Stop right there!", translation: "Pare aÃ­ mesmo!", image: 'âœ‹' },
                        { phrase: "How can I help you?", translation: "Como posso ajudÃ¡-lo?", image: 'ğŸ¤' },
                        { phrase: "Are you okay?", translation: "VocÃª estÃ¡ bem?", image: 'ğŸ˜Š' },
                        { phrase: "Stay calm, please.", translation: "Fique calmo, por favor.", image: 'ğŸ§˜' },
                        { phrase: "Call 911 for emergencies.", translation: "Ligue 911 para emergÃªncias.", image: 'ğŸ“' },
                        { phrase: "The police are here to help.", translation: "A polÃ­cia estÃ¡ aqui para ajudar.", image: 'ğŸ‘®' },
                        // Fase 5 - 10 frases intermediÃ¡rias
                        { phrase: "You are under arrest.", translation: "VocÃª estÃ¡ preso.", image: 'â›“ï¸' },
                        { phrase: "Can I see your license?", translation: "Posso ver sua carteira?", image: 'ğŸ“„' },
                        { phrase: "We are investigating the case.", translation: "Estamos investigando o caso.", image: 'ğŸ”' },
                        { phrase: "Please come to the station.", translation: "Por favor, venha Ã  delegacia.", image: 'ğŸ¢' },
                        { phrase: "Do you have any witnesses?", translation: "VocÃª tem alguma testemunha?", image: 'ğŸ‘ï¸' },
                        { phrase: "I need to write a report.", translation: "Preciso escrever um relatÃ³rio.", image: 'ğŸ“' },
                        { phrase: "The suspect has been caught.", translation: "O suspeito foi pego.", image: 'ğŸ¦¹' },
                        { phrase: "Please describe what happened.", translation: "Por favor, descreva o que aconteceu.", image: 'ğŸ’¬' },
                        { phrase: "We found the stolen items.", translation: "Encontramos os itens roubados.", image: 'ğŸ“¦' },
                        { phrase: "Your safety is our priority.", translation: "Sua seguranÃ§a Ã© nossa prioridade.", image: 'ğŸ›¡ï¸' },
                        // Fase 6 - 15 frases avanÃ§adas
                        { phrase: "You have the right to remain silent.", translation: "VocÃª tem o direito de permanecer em silÃªncio.", image: 'ğŸ¤' },
                        { phrase: "The evidence points to the suspect.", translation: "A evidÃªncia aponta para o suspeito.", image: 'ğŸ”' },
                        { phrase: "We need backup immediately.", translation: "Precisamos de reforÃ§o imediatamente.", image: 'ğŸš”' },
                        { phrase: "The area has been secured.", translation: "A Ã¡rea foi assegurada.", image: 'âœ…' },
                        { phrase: "Please step out of the vehicle.", translation: "Por favor, saia do veÃ­culo.", image: 'ğŸš—' },
                        { phrase: "The investigation is ongoing.", translation: "A investigaÃ§Ã£o estÃ¡ em andamento.", image: 'ğŸ”¬' },
                        { phrase: "We have surveillance footage.", translation: "Temos imagens de vigilÃ¢ncia.", image: 'ğŸ“¹' },
                        { phrase: "The crime scene is protected.", translation: "A cena do crime estÃ¡ protegida.", image: 'ğŸš§' },
                        { phrase: "You need to contact a lawyer.", translation: "VocÃª precisa contatar um advogado.", image: 'ğŸ‘¨â€âš–ï¸' },
                        { phrase: "The patrol will be here soon.", translation: "A patrulha chegarÃ¡ em breve.", image: 'ğŸš”' },
                        { phrase: "We recovered the stolen vehicle.", translation: "Recuperamos o veÃ­culo roubado.", image: 'ğŸš—' },
                        { phrase: "The suspect matched the description.", translation: "O suspeito correspondia Ã  descriÃ§Ã£o.", image: 'ğŸ¯' },
                        { phrase: "Please file an official complaint.", translation: "Por favor, registre uma queixa oficial.", image: 'ğŸ“‹' },
                        { phrase: "Justice will be served.", translation: "A justiÃ§a serÃ¡ feita.", image: 'âš–ï¸' },
                        { phrase: "The community is now safe.", translation: "A comunidade agora estÃ¡ segura.", image: 'ğŸ˜ï¸' }
                    ]
                },
                dialogues: {
                    en: [
                        {
                            context: "Abordagem de trÃ¢nsito",
                            lines: [
                                { speaker: 'citizen', text: "Is there a problem, officer?", translation: "HÃ¡ algum problema, oficial?" },
                                { speaker: 'police', text: "Good evening. License and registration, please.", translation: "Boa noite. Carteira e documentos, por favor.", isQuestion: true, options: ["Good evening. License and registration, please.", "Get out of the car!", "You're going to jail!"]},
                                { speaker: 'citizen', text: "Here you go, officer.", translation: "Aqui estÃ¡, oficial." },
                                { speaker: 'police', text: "Do you know why I stopped you?", translation: "VocÃª sabe por que eu te parei?", isQuestion: true, options: ["Do you know why I stopped you?", "You're a criminal!", "Pay me now!"]}
                            ]
                        }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'citizen', text: "Officer, I need help!", translation: "Oficial, preciso de ajuda!" },
                        { speaker: 'police', text: "What happened? Are you okay?", translation: "O que aconteceu? VocÃª estÃ¡ bem?", options: [
                            { text: "What happened? Are you okay?", translation: "O que aconteceu? VocÃª estÃ¡ bem?" },
                            { text: "I don't care.", translation: "NÃ£o me importo." },
                            { text: "Go away.", translation: "VÃ¡ embora." }
                        ]},
                        { speaker: 'citizen', text: "Someone stole my bag!", translation: "AlguÃ©m roubou minha bolsa!" },
                        { speaker: 'police', text: "Can you describe the suspect?", translation: "Pode descrever o suspeito?", options: [
                            { text: "Can you describe the suspect?", translation: "Pode descrever o suspeito?" },
                            { text: "Buy a new one.", translation: "Compre uma nova." },
                            { text: "That's your problem.", translation: "Problema seu." }
                        ]}
                    ]
                }
            },
            garbagecollector: {
                name: { pt: 'Gari', en: 'Garbage Collector', es: 'Recolector', fr: 'Ã‰boueur', de: 'MÃ¼llmann', it: 'Netturbino', jp: 'æ¸…æƒå“¡' },
                icon: 'ğŸ§¹',
                words: {
                    en: [
                        { word: 'Trash', translation: 'Lixo', image: 'ğŸ—‘ï¸' },
                        { word: 'Truck', translation: 'CaminhÃ£o', image: 'ğŸš›' },
                        { word: 'Recycle', translation: 'Reciclar', image: 'â™»ï¸' },
                        { word: 'Clean', translation: 'Limpar', image: 'ğŸ§¹' },
                        { word: 'Bag', translation: 'Saco', image: 'ğŸ›ï¸' },
                        { word: 'Street', translation: 'Rua', image: 'ğŸ›£ï¸' },
                        { word: 'Environment', translation: 'Meio ambiente', image: 'ğŸŒ' },
                        { word: 'Waste', translation: 'ResÃ­duo', image: 'ğŸ—‘ï¸' },
                        { word: 'Collect', translation: 'Coletar', image: 'ğŸ“¦' },
                        { word: 'Gloves', translation: 'Luvas', image: 'ğŸ§¤' },
                        { word: 'Uniform', translation: 'Uniforme', image: 'ğŸ‘•' },
                        { word: 'Schedule', translation: 'HorÃ¡rio', image: 'ğŸ•' }
                    ],
                    es: [
                        { word: 'Basura', translation: 'Lixo', image: 'ğŸ—‘ï¸' },
                        { word: 'CamiÃ³n', translation: 'CaminhÃ£o', image: 'ğŸš›' },
                        { word: 'Reciclar', translation: 'Reciclar', image: 'â™»ï¸' },
                        { word: 'Limpiar', translation: 'Limpar', image: 'ğŸ§¹' },
                        { word: 'Bolsa', translation: 'Saco', image: 'ğŸ›ï¸' },
                        { word: 'Calle', translation: 'Rua', image: 'ğŸ›£ï¸' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Please separate the recyclables.", translation: "Por favor, separe os reciclÃ¡veis.", image: 'â™»ï¸' },
                        { phrase: "The truck comes on Monday.", translation: "O caminhÃ£o vem na segunda.", image: 'ğŸš›' },
                        { phrase: "Keep the city clean!", translation: "Mantenha a cidade limpa!", image: 'ğŸ™ï¸' },
                        { phrase: "This goes in the recycling bin.", translation: "Isso vai na lixeira de reciclagem.", image: 'â™»ï¸' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'resident', text: "Good morning! What time do you collect trash?", translation: "Bom dia! Que horas vocÃªs coletam o lixo?" },
                        { speaker: 'collector', text: "We come every Tuesday and Friday.", translation: "Viemos toda terÃ§a e sexta.", options: [
                            { text: "We come every Tuesday and Friday.", translation: "Viemos toda terÃ§a e sexta." },
                            { text: "I don't know.", translation: "NÃ£o sei." },
                            { text: "Never.", translation: "Nunca." }
                        ]},
                        { speaker: 'resident', text: "Should I separate recyclables?", translation: "Devo separar os reciclÃ¡veis?" },
                        { speaker: 'collector', text: "Yes, please! It helps the environment.", translation: "Sim, por favor! Ajuda o meio ambiente.", options: [
                            { text: "Yes, please! It helps the environment.", translation: "Sim, por favor! Ajuda o meio ambiente." },
                            { text: "It doesn't matter.", translation: "NÃ£o importa." },
                            { text: "Throw everything together.", translation: "Jogue tudo junto." }
                        ]}
                    ]
                }
            },
            guide: {
                name: { pt: 'Guia TurÃ­stico', en: 'Tour Guide', es: 'GuÃ­a TurÃ­stico', fr: 'Guide', de: 'Reiseleiter', it: 'Guida', jp: 'ãƒ„ã‚¢ãƒ¼ã‚¬ã‚¤ãƒ‰' },
                icon: 'ğŸ§­',
                words: {
                    en: [
                        { word: 'Tourist', translation: 'Turista', image: 'ğŸ§³' },
                        { word: 'Monument', translation: 'Monumento', image: 'ğŸ—½' },
                        { word: 'Museum', translation: 'Museu', image: 'ğŸ›ï¸' },
                        { word: 'History', translation: 'HistÃ³ria', image: 'ğŸ“œ' },
                        { word: 'Map', translation: 'Mapa', image: 'ğŸ—ºï¸' },
                        { word: 'Camera', translation: 'CÃ¢mera', image: 'ğŸ“·' },
                        { word: 'Bus', translation: 'Ã”nibus', image: 'ğŸšŒ' },
                        { word: 'Ticket', translation: 'Ingresso', image: 'ğŸ«' },
                        { word: 'Attraction', translation: 'AtraÃ§Ã£o', image: 'ğŸ¡' },
                        { word: 'Beach', translation: 'Praia', image: 'ğŸ–ï¸' },
                        { word: 'Restaurant', translation: 'Restaurante', image: 'ğŸ½ï¸' },
                        { word: 'Hotel', translation: 'Hotel', image: 'ğŸ¨' }
                    ],
                    es: [
                        { word: 'Turista', translation: 'Turista', image: 'ğŸ§³' },
                        { word: 'Monumento', translation: 'Monumento', image: 'ğŸ—½' },
                        { word: 'Museo', translation: 'Museu', image: 'ğŸ›ï¸' },
                        { word: 'Historia', translation: 'HistÃ³ria', image: 'ğŸ“œ' },
                        { word: 'Mapa', translation: 'Mapa', image: 'ğŸ—ºï¸' },
                        { word: 'CÃ¡mara', translation: 'CÃ¢mera', image: 'ğŸ“·' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Welcome to our city!", translation: "Bem-vindos Ã  nossa cidade!", image: 'ğŸ™ï¸' },
                        { phrase: "This monument is 200 years old.", translation: "Este monumento tem 200 anos.", image: 'ğŸ—½' },
                        { phrase: "Please stay with the group.", translation: "Por favor, fiquem com o grupo.", image: 'ğŸ‘¥' },
                        { phrase: "You can take photos here.", translation: "VocÃªs podem tirar fotos aqui.", image: 'ğŸ“·' },
                        { phrase: "The museum closes at 6 PM.", translation: "O museu fecha Ã s 18h.", image: 'ğŸ›ï¸' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'tourist', text: "What's the most famous place here?", translation: "Qual Ã© o lugar mais famoso aqui?" },
                        { speaker: 'guide', text: "The old cathedral is our main attraction.", translation: "A catedral antiga Ã© nossa principal atraÃ§Ã£o.", options: [
                            { text: "The old cathedral is our main attraction.", translation: "A catedral antiga Ã© nossa principal atraÃ§Ã£o." },
                            { text: "Nothing interesting here.", translation: "Nada interessante aqui." },
                            { text: "I don't know this city.", translation: "NÃ£o conheÃ§o esta cidade." }
                        ]},
                        { speaker: 'tourist', text: "How old is it?", translation: "Quantos anos ela tem?" },
                        { speaker: 'guide', text: "It was built in 1500.", translation: "Foi construÃ­da em 1500.", options: [
                            { text: "It was built in 1500.", translation: "Foi construÃ­da em 1500." },
                            { text: "Last year.", translation: "Ano passado." },
                            { text: "I forgot.", translation: "Esqueci." }
                        ]}
                    ]
                }
            },
            artisan: {
                name: { pt: 'ArtesÃ£o', en: 'Artisan', es: 'Artesano', fr: 'Artisan', de: 'Handwerker', it: 'Artigiano', jp: 'è·äºº' },
                icon: 'ğŸ¨',
                words: {
                    en: [
                        { word: 'Craft', translation: 'Artesanato', image: 'ğŸ¨' },
                        { word: 'Handmade', translation: 'Feito Ã  mÃ£o', image: 'âœ‹' },
                        { word: 'Clay', translation: 'Argila', image: 'ğŸº' },
                        { word: 'Wood', translation: 'Madeira', image: 'ğŸªµ' },
                        { word: 'Fabric', translation: 'Tecido', image: 'ğŸ§µ' },
                        { word: 'Paint', translation: 'Tinta', image: 'ğŸ¨' },
                        { word: 'Pottery', translation: 'CerÃ¢mica', image: 'ğŸº' },
                        { word: 'Jewelry', translation: 'Joias', image: 'ğŸ’' },
                        { word: 'Tool', translation: 'Ferramenta', image: 'ğŸ”§' },
                        { word: 'Design', translation: 'Design', image: 'âœï¸' },
                        { word: 'Pattern', translation: 'PadrÃ£o', image: 'ğŸ”²' },
                        { word: 'Create', translation: 'Criar', image: 'âœ¨' }
                    ],
                    es: [
                        { word: 'ArtesanÃ­a', translation: 'Artesanato', image: 'ğŸ¨' },
                        { word: 'Hecho a mano', translation: 'Feito Ã  mÃ£o', image: 'âœ‹' },
                        { word: 'Arcilla', translation: 'Argila', image: 'ğŸº' },
                        { word: 'Madera', translation: 'Madeira', image: 'ğŸªµ' },
                        { word: 'Tela', translation: 'Tecido', image: 'ğŸ§µ' },
                        { word: 'Pintura', translation: 'Tinta', image: 'ğŸ¨' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "This is handmade with love.", translation: "Isso Ã© feito Ã  mÃ£o com amor.", image: 'â¤ï¸' },
                        { phrase: "Each piece is unique.", translation: "Cada peÃ§a Ã© Ãºnica.", image: 'âœ¨' },
                        { phrase: "I use natural materials.", translation: "Uso materiais naturais.", image: 'ğŸŒ¿' },
                        { phrase: "It takes three days to make.", translation: "Leva trÃªs dias para fazer.", image: 'ğŸ“…' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'customer', text: "How do you make this?", translation: "Como vocÃª faz isso?" },
                        { speaker: 'artisan', text: "I shape the clay by hand.", translation: "Modelo a argila com as mÃ£os.", options: [
                            { text: "I shape the clay by hand.", translation: "Modelo a argila com as mÃ£os." },
                            { text: "A machine does it.", translation: "Uma mÃ¡quina faz." },
                            { text: "I buy it ready.", translation: "Compro pronto." }
                        ]},
                        { speaker: 'customer', text: "It's beautiful! How much?", translation: "Ã‰ lindo! Quanto custa?" },
                        { speaker: 'artisan', text: "This piece is 50 dollars.", translation: "Esta peÃ§a custa 50 dÃ³lares.", options: [
                            { text: "This piece is 50 dollars.", translation: "Esta peÃ§a custa 50 dÃ³lares." },
                            { text: "One million dollars.", translation: "Um milhÃ£o de dÃ³lares." },
                            { text: "It's free.", translation: "Ã‰ de graÃ§a." }
                        ]}
                    ]
                }
            },
            engineer: {
                name: { pt: 'Engenheiro', en: 'Engineer', es: 'Ingeniero', fr: 'IngÃ©nieur', de: 'Ingenieur', it: 'Ingegnere', jp: 'ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢' },
                icon: 'ğŸ‘·',
                words: {
                    en: [
                        { word: 'Project', translation: 'Projeto', image: 'ğŸ“' },
                        { word: 'Blueprint', translation: 'Planta', image: 'ğŸ“‹' },
                        { word: 'Structure', translation: 'Estrutura', image: 'ğŸ—ï¸' },
                        { word: 'Calculate', translation: 'Calcular', image: 'ğŸ”¢' },
                        { word: 'Material', translation: 'Material', image: 'ğŸ§±' },
                        { word: 'Safety', translation: 'SeguranÃ§a', image: 'â›‘ï¸' },
                        { word: 'Machine', translation: 'MÃ¡quina', image: 'âš™ï¸' },
                        { word: 'Bridge', translation: 'Ponte', image: 'ğŸŒ‰' },
                        { word: 'Building', translation: 'EdifÃ­cio', image: 'ğŸ¢' },
                        { word: 'System', translation: 'Sistema', image: 'ğŸ”§' },
                        { word: 'Technology', translation: 'Tecnologia', image: 'ğŸ’»' },
                        { word: 'Measure', translation: 'Medir', image: 'ğŸ“' }
                    ],
                    es: [
                        { word: 'Proyecto', translation: 'Projeto', image: 'ğŸ“' },
                        { word: 'Plano', translation: 'Planta', image: 'ğŸ“‹' },
                        { word: 'Estructura', translation: 'Estrutura', image: 'ğŸ—ï¸' },
                        { word: 'Calcular', translation: 'Calcular', image: 'ğŸ”¢' },
                        { word: 'Material', translation: 'Material', image: 'ğŸ§±' },
                        { word: 'Seguridad', translation: 'SeguranÃ§a', image: 'â›‘ï¸' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "We need to review the calculations.", translation: "Precisamos revisar os cÃ¡lculos.", image: 'ğŸ”¢' },
                        { phrase: "The structure is safe.", translation: "A estrutura Ã© segura.", image: 'âœ…' },
                        { phrase: "Check the blueprints.", translation: "Verifique as plantas.", image: 'ğŸ“‹' },
                        { phrase: "This project will take 6 months.", translation: "Este projeto levarÃ¡ 6 meses.", image: 'ğŸ“…' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'client', text: "Can you build a bridge here?", translation: "VocÃª pode construir uma ponte aqui?" },
                        { speaker: 'engineer', text: "Yes, but we need to study the soil first.", translation: "Sim, mas precisamos estudar o solo primeiro.", options: [
                            { text: "Yes, but we need to study the soil first.", translation: "Sim, mas precisamos estudar o solo primeiro." },
                            { text: "Yes, we can start today!", translation: "Sim, podemos comeÃ§ar hoje!" },
                            { text: "No, it's impossible.", translation: "NÃ£o, Ã© impossÃ­vel." }
                        ]},
                        { speaker: 'client', text: "How long will it take?", translation: "Quanto tempo vai levar?" },
                        { speaker: 'engineer', text: "About two years for a project this size.", translation: "Cerca de dois anos para um projeto deste tamanho.", options: [
                            { text: "About two years for a project this size.", translation: "Cerca de dois anos para um projeto deste tamanho." },
                            { text: "One week.", translation: "Uma semana." },
                            { text: "Forever.", translation: "Para sempre." }
                        ]}
                    ]
                }
            },
            architect: {
                name: { pt: 'Arquiteto', en: 'Architect', es: 'Arquitecto', fr: 'Architecte', de: 'Architekt', it: 'Architetto', jp: 'å»ºç¯‰å®¶' },
                icon: 'ğŸ›ï¸',
                words: {
                    en: [
                        { word: 'Design', translation: 'Design', image: 'âœï¸' },
                        { word: 'Floor plan', translation: 'Planta baixa', image: 'ğŸ“' },
                        { word: 'Model', translation: 'Maquete', image: 'ğŸ ' },
                        { word: 'Space', translation: 'EspaÃ§o', image: 'ğŸ“' },
                        { word: 'Light', translation: 'Luz', image: 'ğŸ’¡' },
                        { word: 'Window', translation: 'Janela', image: 'ğŸªŸ' },
                        { word: 'Roof', translation: 'Telhado', image: 'ğŸ ' },
                        { word: 'Wall', translation: 'Parede', image: 'ğŸ§±' },
                        { word: 'Garden', translation: 'Jardim', image: 'ğŸŒ³' },
                        { word: 'Modern', translation: 'Moderno', image: 'ğŸ™ï¸' },
                        { word: 'Classic', translation: 'ClÃ¡ssico', image: 'ğŸ›ï¸' },
                        { word: 'Sustainable', translation: 'SustentÃ¡vel', image: 'ğŸŒ±' }
                    ],
                    es: [
                        { word: 'DiseÃ±o', translation: 'Design', image: 'âœï¸' },
                        { word: 'Plano', translation: 'Planta', image: 'ğŸ“' },
                        { word: 'Maqueta', translation: 'Maquete', image: 'ğŸ ' },
                        { word: 'Espacio', translation: 'EspaÃ§o', image: 'ğŸ“' },
                        { word: 'Luz', translation: 'Luz', image: 'ğŸ’¡' },
                        { word: 'Ventana', translation: 'Janela', image: 'ğŸªŸ' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Let me show you the model.", translation: "Deixe-me mostrar a maquete.", image: 'ğŸ ' },
                        { phrase: "Natural light is important.", translation: "Luz natural Ã© importante.", image: 'â˜€ï¸' },
                        { phrase: "This design is sustainable.", translation: "Este design Ã© sustentÃ¡vel.", image: 'ğŸŒ±' },
                        { phrase: "The living room faces south.", translation: "A sala de estar fica virada para o sul.", image: 'ğŸ§­' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'client', text: "I want a modern house.", translation: "Quero uma casa moderna." },
                        { speaker: 'architect', text: "Great! How many bedrooms do you need?", translation: "Ã“timo! Quantos quartos vocÃª precisa?", options: [
                            { text: "Great! How many bedrooms do you need?", translation: "Ã“timo! Quantos quartos vocÃª precisa?" },
                            { text: "I only design castles.", translation: "SÃ³ projeto castelos." },
                            { text: "Modern is ugly.", translation: "Moderno Ã© feio." }
                        ]},
                        { speaker: 'client', text: "Three bedrooms and a big garden.", translation: "TrÃªs quartos e um jardim grande." },
                        { speaker: 'architect', text: "I have some ideas. Let me draw them.", translation: "Tenho algumas ideias. Deixe-me desenhÃ¡-las.", options: [
                            { text: "I have some ideas. Let me draw them.", translation: "Tenho algumas ideias. Deixe-me desenhÃ¡-las." },
                            { text: "That's impossible.", translation: "Isso Ã© impossÃ­vel." },
                            { text: "Gardens are too expensive.", translation: "Jardins sÃ£o muito caros." }
                        ]}
                    ]
                }
            },
            farmer: {
                name: { pt: 'Agricultor', en: 'Farmer', es: 'Agricultor', fr: 'Agriculteur', de: 'Bauer', it: 'Agricoltore', jp: 'è¾²å®¶' },
                icon: 'ğŸ‘¨â€ğŸŒ¾',
                words: {
                    en: [
                        { word: 'Farm', translation: 'Fazenda', image: 'ğŸ¡' },
                        { word: 'Tractor', translation: 'Trator', image: 'ğŸšœ' },
                        { word: 'Harvest', translation: 'Colheita', image: 'ğŸŒ¾' },
                        { word: 'Seed', translation: 'Semente', image: 'ğŸŒ±' },
                        { word: 'Soil', translation: 'Solo', image: 'ğŸŸ«' },
                        { word: 'Crop', translation: 'PlantaÃ§Ã£o', image: 'ğŸŒ½' },
                        { word: 'Water', translation: 'Ãgua', image: 'ğŸ’§' },
                        { word: 'Sun', translation: 'Sol', image: 'â˜€ï¸' },
                        { word: 'Cow', translation: 'Vaca', image: 'ğŸ„' },
                        { word: 'Chicken', translation: 'Galinha', image: 'ğŸ”' },
                        { word: 'Vegetable', translation: 'Vegetal', image: 'ğŸ¥¬' },
                        { word: 'Fruit', translation: 'Fruta', image: 'ğŸ' }
                    ],
                    es: [
                        { word: 'Granja', translation: 'Fazenda', image: 'ğŸ¡' },
                        { word: 'Tractor', translation: 'Trator', image: 'ğŸšœ' },
                        { word: 'Cosecha', translation: 'Colheita', image: 'ğŸŒ¾' },
                        { word: 'Semilla', translation: 'Semente', image: 'ğŸŒ±' },
                        { word: 'Tierra', translation: 'Solo', image: 'ğŸŸ«' },
                        { word: 'Cultivo', translation: 'PlantaÃ§Ã£o', image: 'ğŸŒ½' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "The harvest is ready.", translation: "A colheita estÃ¡ pronta.", image: 'ğŸŒ¾' },
                        { phrase: "We plant in spring.", translation: "Plantamos na primavera.", image: 'ğŸŒ±' },
                        { phrase: "The cows need feeding.", translation: "As vacas precisam comer.", image: 'ğŸ„' },
                        { phrase: "Rain is good for the crops.", translation: "Chuva Ã© boa para as plantaÃ§Ãµes.", image: 'ğŸŒ§ï¸' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'visitor', text: "What do you grow here?", translation: "O que vocÃª cultiva aqui?" },
                        { speaker: 'farmer', text: "We grow corn, tomatoes, and beans.", translation: "Cultivamos milho, tomates e feijÃ£o.", options: [
                            { text: "We grow corn, tomatoes, and beans.", translation: "Cultivamos milho, tomates e feijÃ£o." },
                            { text: "Nothing, the land is dead.", translation: "Nada, a terra estÃ¡ morta." },
                            { text: "Only weeds.", translation: "SÃ³ ervas daninhas." }
                        ]},
                        { speaker: 'visitor', text: "Can I buy some fresh vegetables?", translation: "Posso comprar vegetais frescos?" },
                        { speaker: 'farmer', text: "Of course! Everything here is organic.", translation: "Claro! Tudo aqui Ã© orgÃ¢nico.", options: [
                            { text: "Of course! Everything here is organic.", translation: "Claro! Tudo aqui Ã© orgÃ¢nico." },
                            { text: "No, we don't sell anything.", translation: "NÃ£o, nÃ£o vendemos nada." },
                            { text: "We use lots of chemicals.", translation: "Usamos muitos quÃ­micos." }
                        ]}
                    ]
                }
            },
            seller: {
                name: { pt: 'Vendedor', en: 'Salesperson', es: 'Vendedor', fr: 'Vendeur', de: 'VerkÃ¤ufer', it: 'Venditore', jp: 'è²©å£²å“¡' },
                icon: 'ğŸ›’',
                words: {
                    en: [
                        { word: 'Store', translation: 'Loja', image: 'ğŸª' },
                        { word: 'Customer', translation: 'Cliente', image: 'ğŸ§‘' },
                        { word: 'Price', translation: 'PreÃ§o', image: 'ğŸ’°' },
                        { word: 'Discount', translation: 'Desconto', image: 'ğŸ·ï¸' },
                        { word: 'Payment', translation: 'Pagamento', image: 'ğŸ’³' },
                        { word: 'Receipt', translation: 'Recibo', image: 'ğŸ§¾' },
                        { word: 'Product', translation: 'Produto', image: 'ğŸ“¦' },
                        { word: 'Sale', translation: 'PromoÃ§Ã£o', image: 'ğŸ‰' },
                        { word: 'Cash', translation: 'Dinheiro', image: 'ğŸ’µ' },
                        { word: 'Credit card', translation: 'CartÃ£o de crÃ©dito', image: 'ğŸ’³' },
                        { word: 'Size', translation: 'Tamanho', image: 'ğŸ“' },
                        { word: 'Color', translation: 'Cor', image: 'ğŸ¨' }
                    ],
                    es: [
                        { word: 'Tienda', translation: 'Loja', image: 'ğŸª' },
                        { word: 'Cliente', translation: 'Cliente', image: 'ğŸ§‘' },
                        { word: 'Precio', translation: 'PreÃ§o', image: 'ğŸ’°' },
                        { word: 'Descuento', translation: 'Desconto', image: 'ğŸ·ï¸' },
                        { word: 'Pago', translation: 'Pagamento', image: 'ğŸ’³' },
                        { word: 'Recibo', translation: 'Recibo', image: 'ğŸ§¾' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "How can I help you?", translation: "Como posso ajudÃ¡-lo?", image: 'ğŸ¤' },
                        { phrase: "This is on sale today.", translation: "Isso estÃ¡ em promoÃ§Ã£o hoje.", image: 'ğŸ·ï¸' },
                        { phrase: "We accept credit cards.", translation: "Aceitamos cartÃµes de crÃ©dito.", image: 'ğŸ’³' },
                        { phrase: "Would you like a bag?", translation: "Gostaria de uma sacola?", image: 'ğŸ›ï¸' },
                        { phrase: "The fitting room is over there.", translation: "O provador fica ali.", image: 'ğŸšª' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'customer', text: "Do you have this in blue?", translation: "VocÃªs tÃªm isso em azul?" },
                        { speaker: 'seller', text: "Let me check for you.", translation: "Deixe-me verificar para vocÃª.", options: [
                            { text: "Let me check for you.", translation: "Deixe-me verificar para vocÃª." },
                            { text: "No, we only have ugly colors.", translation: "NÃ£o, sÃ³ temos cores feias." },
                            { text: "Find it yourself.", translation: "Procure vocÃª mesmo." }
                        ]},
                        { speaker: 'customer', text: "How much is this?", translation: "Quanto custa isso?" },
                        { speaker: 'seller', text: "It's $29.99, but we have a 20% discount.", translation: "Custa $29.99, mas temos 20% de desconto.", options: [
                            { text: "It's $29.99, but we have a 20% discount.", translation: "Custa $29.99, mas temos 20% de desconto." },
                            { text: "I don't know the prices.", translation: "NÃ£o sei os preÃ§os." },
                            { text: "It's very expensive, sorry.", translation: "Ã‰ muito caro, desculpe." }
                        ]}
                    ]
                }
            },
            chef: {
                name: { pt: 'Chef', en: 'Chef', es: 'Chef', fr: 'Chef', de: 'Koch', it: 'Chef', jp: 'ã‚·ã‚§ãƒ•' },
                icon: 'ğŸ‘¨â€ğŸ³',
                words: {
                    en: [
                        { word: 'Kitchen', translation: 'Cozinha', image: 'ğŸ³' },
                        { word: 'Recipe', translation: 'Receita', image: 'ğŸ“–' },
                        { word: 'Ingredients', translation: 'Ingredientes', image: 'ğŸ¥—' },
                        { word: 'Knife', translation: 'Faca', image: 'ğŸ”ª' },
                        { word: 'Pan', translation: 'Panela', image: 'ğŸ²' },
                        { word: 'Oven', translation: 'Forno', image: 'ğŸ”¥' },
                        { word: 'Spice', translation: 'Tempero', image: 'ğŸ§‚' },
                        { word: 'Menu', translation: 'CardÃ¡pio', image: 'ğŸ“‹' },
                        { word: 'Dish', translation: 'Prato', image: 'ğŸ½ï¸' },
                        { word: 'Taste', translation: 'Sabor', image: 'ğŸ‘…' }
                    ],
                    es: [
                        { word: 'Cocina', translation: 'Cozinha', image: 'ğŸ³' },
                        { word: 'Receta', translation: 'Receita', image: 'ğŸ“–' },
                        { word: 'Ingredientes', translation: 'Ingredientes', image: 'ğŸ¥—' },
                        { word: 'Cuchillo', translation: 'Faca', image: 'ğŸ”ª' },
                        { word: 'SartÃ©n', translation: 'Panela', image: 'ğŸ²' },
                        { word: 'Horno', translation: 'Forno', image: 'ğŸ”¥' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Today's special is pasta.", translation: "O especial de hoje Ã© macarrÃ£o.", image: 'ğŸ' },
                        { phrase: "The sauce needs more salt.", translation: "O molho precisa de mais sal.", image: 'ğŸ§‚' },
                        { phrase: "Dinner is served!", translation: "O jantar estÃ¡ servido!", image: 'ğŸ½ï¸' },
                        { phrase: "I use fresh ingredients.", translation: "Uso ingredientes frescos.", image: 'ğŸ¥—' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'customer', text: "What do you recommend?", translation: "O que vocÃª recomenda?" },
                        { speaker: 'chef', text: "Our special today is grilled salmon.", translation: "Nosso especial de hoje Ã© salmÃ£o grelhado.", options: [
                            { text: "Our special today is grilled salmon.", translation: "Nosso especial de hoje Ã© salmÃ£o grelhado." },
                            { text: "Everything is bad today.", translation: "Tudo estÃ¡ ruim hoje." },
                            { text: "I don't know.", translation: "NÃ£o sei." }
                        ]},
                        { speaker: 'customer', text: "Is it spicy?", translation: "Ã‰ apimentado?" },
                        { speaker: 'chef', text: "No, but I can add some spice if you want.", translation: "NÃ£o, mas posso adicionar tempero se quiser.", options: [
                            { text: "No, but I can add some spice if you want.", translation: "NÃ£o, mas posso adicionar tempero se quiser." },
                            { text: "Yes, extremely spicy!", translation: "Sim, extremamente apimentado!" },
                            { text: "I don't care about your preferences.", translation: "NÃ£o me importo com suas preferÃªncias." }
                        ]}
                    ]
                }
            },
            teacher: {
                name: { pt: 'Professor', en: 'Teacher', es: 'Profesor', fr: 'Professeur', de: 'Lehrer', it: 'Insegnante', jp: 'å…ˆç”Ÿ' },
                icon: 'ğŸ‘¨â€ğŸ«',
                words: {
                    en: [
                        { word: 'Classroom', translation: 'Sala de aula', image: 'ğŸ«' },
                        { word: 'Student', translation: 'Aluno', image: 'ğŸ‘¨â€ğŸ“' },
                        { word: 'Lesson', translation: 'Aula', image: 'ğŸ“š' },
                        { word: 'Homework', translation: 'Dever de casa', image: 'ğŸ“' },
                        { word: 'Exam', translation: 'Prova', image: 'ğŸ“‹' },
                        { word: 'Blackboard', translation: 'Quadro negro', image: 'ğŸ“' },
                        { word: 'Grade', translation: 'Nota', image: 'ğŸ’¯' },
                        { word: 'Subject', translation: 'MatÃ©ria', image: 'ğŸ“–' },
                        { word: 'Schedule', translation: 'HorÃ¡rio', image: 'ğŸ•' },
                        { word: 'Knowledge', translation: 'Conhecimento', image: 'ğŸ§ ' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Please open your books.", translation: "Por favor, abram seus livros.", image: 'ğŸ“–' },
                        { phrase: "The homework is due tomorrow.", translation: "O dever Ã© para amanhÃ£.", image: 'ğŸ“' },
                        { phrase: "Any questions?", translation: "Alguma pergunta?", image: 'â“' },
                        { phrase: "Very good answer!", translation: "Resposta muito boa!", image: 'âœ…' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'student', text: "Good morning, teacher!", translation: "Bom dia, professor!" },
                        { speaker: 'teacher', text: "Good morning! Please open your books.", translation: "Bom dia! Por favor abram seus livros.", options: [
                            { text: "Good morning! Please open your books.", translation: "Bom dia! Por favor abram seus livros." },
                            { text: "Go home now.", translation: "VÃ£o para casa agora." },
                            { text: "Class is cancelled.", translation: "A aula estÃ¡ cancelada." }
                        ]},
                        { speaker: 'student', text: "I have a question.", translation: "Tenho uma pergunta." },
                        { speaker: 'teacher', text: "Of course, what would you like to know?", translation: "Claro, o que gostaria de saber?", options: [
                            { text: "Of course, what would you like to know?", translation: "Claro, o que gostaria de saber?" },
                            { text: "No questions allowed.", translation: "NÃ£o sÃ£o permitidas perguntas." },
                            { text: "Figure it out yourself.", translation: "Descubra sozinho." }
                        ]}
                    ]
                }
            },
            firefighter: {
                name: { pt: 'Bombeiro', en: 'Firefighter', es: 'Bombero', fr: 'Pompier', de: 'Feuerwehrmann', it: 'Pompiere', jp: 'æ¶ˆé˜²å£«' },
                icon: 'ğŸ‘¨â€ğŸš’',
                words: {
                    en: [
                        { word: 'Fire', translation: 'Fogo', image: 'ğŸ”¥' },
                        { word: 'Hose', translation: 'Mangueira', image: 'ğŸš¿' },
                        { word: 'Truck', translation: 'CaminhÃ£o', image: 'ğŸš’' },
                        { word: 'Rescue', translation: 'Resgate', image: 'ğŸ†˜' },
                        { word: 'Ladder', translation: 'Escada', image: 'ğŸªœ' },
                        { word: 'Helmet', translation: 'Capacete', image: 'â›‘ï¸' },
                        { word: 'Emergency', translation: 'EmergÃªncia', image: 'ğŸš¨' },
                        { word: 'Safety', translation: 'SeguranÃ§a', image: 'ğŸ›¡ï¸' },
                        { word: 'Alarm', translation: 'Alarme', image: 'ğŸ””' },
                        { word: 'Smoke', translation: 'FumaÃ§a', image: 'ğŸ’¨' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Everyone stay calm!", translation: "Todos fiquem calmos!", image: 'âœ‹' },
                        { phrase: "Exit the building now!", translation: "Saiam do prÃ©dio agora!", image: 'ğŸšª' },
                        { phrase: "The fire is under control.", translation: "O fogo estÃ¡ sob controle.", image: 'âœ…' },
                        { phrase: "Is anyone still inside?", translation: "Ainda tem alguÃ©m lÃ¡ dentro?", image: 'â“' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'citizen', text: "Help! There's a fire!", translation: "Socorro! HÃ¡ um incÃªndio!" },
                        { speaker: 'firefighter', text: "Stay calm. Is anyone inside?", translation: "Fique calmo. Tem alguÃ©m lÃ¡ dentro?", options: [
                            { text: "Stay calm. Is anyone inside?", translation: "Fique calmo. Tem alguÃ©m lÃ¡ dentro?" },
                            { text: "I'm on my lunch break.", translation: "Estou no meu intervalo." },
                            { text: "That's not my problem.", translation: "Isso nÃ£o Ã© problema meu." }
                        ]},
                        { speaker: 'citizen', text: "My cat is on the second floor!", translation: "Meu gato estÃ¡ no segundo andar!" },
                        { speaker: 'firefighter', text: "We'll get your cat. Please stay back.", translation: "Vamos buscar seu gato. Por favor, afaste-se.", options: [
                            { text: "We'll get your cat. Please stay back.", translation: "Vamos buscar seu gato. Por favor, afaste-se." },
                            { text: "We only save humans.", translation: "SÃ³ salvamos humanos." },
                            { text: "Too dangerous, sorry.", translation: "Muito perigoso, desculpe." }
                        ]}
                    ]
                }
            },
            pilot: {
                name: { pt: 'Piloto', en: 'Pilot', es: 'Piloto', fr: 'Pilote', de: 'Pilot', it: 'Pilota', jp: 'ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆ' },
                icon: 'ğŸ‘¨â€âœˆï¸',
                words: {
                    en: [
                        { word: 'Airplane', translation: 'AviÃ£o', image: 'âœˆï¸' },
                        { word: 'Cockpit', translation: 'Cabine', image: 'ğŸ›ï¸' },
                        { word: 'Runway', translation: 'Pista', image: 'ğŸ›«' },
                        { word: 'Passenger', translation: 'Passageiro', image: 'ğŸ§³' },
                        { word: 'Flight', translation: 'Voo', image: 'ğŸ›©ï¸' },
                        { word: 'Airport', translation: 'Aeroporto', image: 'ğŸ¢' },
                        { word: 'Altitude', translation: 'Altitude', image: 'ğŸ“' },
                        { word: 'Landing', translation: 'Aterrissagem', image: 'ğŸ›¬' },
                        { word: 'Turbulence', translation: 'TurbulÃªncia', image: 'ğŸŒªï¸' },
                        { word: 'Control', translation: 'Controle', image: 'ğŸ®' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Prepare for takeoff.", translation: "Preparem-se para decolar.", image: 'ğŸ›«' },
                        { phrase: "We're cruising at 35,000 feet.", translation: "Estamos voando a 35.000 pÃ©s.", image: 'âœˆï¸' },
                        { phrase: "Please fasten your seatbelts.", translation: "Por favor, apertem os cintos.", image: 'ğŸ’º' },
                        { phrase: "We'll be landing in 30 minutes.", translation: "Pousar em 30 minutos.", image: 'ğŸ›¬' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'copilot', text: "Tower, this is flight 247.", translation: "Torre, aqui Ã© o voo 247." },
                        { speaker: 'pilot', text: "Requesting permission to land.", translation: "Solicitando permissÃ£o para pousar.", options: [
                            { text: "Requesting permission to land.", translation: "Solicitando permissÃ£o para pousar." },
                            { text: "I'll land wherever I want.", translation: "Vou pousar onde eu quiser." },
                            { text: "I'm lost.", translation: "Estou perdido." }
                        ]},
                        { speaker: 'copilot', text: "Tower confirmed runway 24.", translation: "Torre confirmou pista 24." },
                        { speaker: 'pilot', text: "Roger. Preparing for approach.", translation: "Entendido. Preparando para aproximaÃ§Ã£o.", options: [
                            { text: "Roger. Preparing for approach.", translation: "Entendido. Preparando para aproximaÃ§Ã£o." },
                            { text: "I don't know how to land.", translation: "NÃ£o sei pousar." },
                            { text: "Let's try runway 50.", translation: "Vamos tentar pista 50." }
                        ]}
                    ]
                }
            },
            veterinarian: {
                name: { pt: 'VeterinÃ¡rio', en: 'Veterinarian', es: 'Veterinario', fr: 'VÃ©tÃ©rinaire', de: 'Tierarzt', it: 'Veterinario', jp: 'ç£åŒ»' },
                icon: 'ğŸ•â€ğŸ¦º',
                words: {
                    en: [
                        { word: 'Pet', translation: 'Animal de estimaÃ§Ã£o', image: 'ğŸ•' },
                        { word: 'Clinic', translation: 'ClÃ­nica', image: 'ğŸ¥' },
                        { word: 'Vaccine', translation: 'Vacina', image: 'ğŸ’‰' },
                        { word: 'Health', translation: 'SaÃºde', image: 'â¤ï¸' },
                        { word: 'Care', translation: 'Cuidado', image: 'ğŸ¤²' },
                        { word: 'Surgery', translation: 'Cirurgia', image: 'ğŸ”¬' },
                        { word: 'Medicine', translation: 'RemÃ©dio', image: 'ğŸ’Š' },
                        { word: 'Check-up', translation: 'Consulta', image: 'ğŸ“‹' },
                        { word: 'Animal', translation: 'Animal', image: 'ğŸ¾' },
                        { word: 'Treatment', translation: 'Tratamento', image: 'ğŸ©º' }
                    ]
                },
                phrases: {
                    en: [
                        { phrase: "Your pet is healthy.", translation: "Seu pet estÃ¡ saudÃ¡vel.", image: 'âœ…' },
                        { phrase: "Time for the vaccine.", translation: "Hora da vacina.", image: 'ğŸ’‰' },
                        { phrase: "Give this medicine twice a day.", translation: "DÃª este remÃ©dio duas vezes ao dia.", image: 'ğŸ’Š' },
                        { phrase: "Bring him back in a week.", translation: "Traga-o de volta em uma semana.", image: 'ğŸ“…' }
                    ]
                },
                conversations: {
                    en: [
                        { speaker: 'owner', text: "My dog isn't eating.", translation: "Meu cachorro nÃ£o estÃ¡ comendo." },
                        { speaker: 'vet', text: "Let me examine him.", translation: "Deixe-me examinÃ¡-lo.", options: [
                            { text: "Let me examine him.", translation: "Deixe-me examinÃ¡-lo." },
                            { text: "Dogs don't need to eat.", translation: "Cachorros nÃ£o precisam comer." },
                            { text: "I only treat cats.", translation: "SÃ³ trato gatos." }
                        ]},
                        { speaker: 'owner', text: "Is it serious?", translation: "Ã‰ sÃ©rio?" },
                        { speaker: 'vet', text: "Don't worry, it's just a minor infection.", translation: "NÃ£o se preocupe, Ã© apenas uma infecÃ§Ã£o leve.", options: [
                            { text: "Don't worry, it's just a minor infection.", translation: "NÃ£o se preocupe, Ã© apenas uma infecÃ§Ã£o leve." },
                            { text: "Yes, very serious.", translation: "Sim, muito sÃ©rio." },
                            { text: "I have no idea.", translation: "NÃ£o tenho ideia." }
                        ]}
                    ]
                }
            }
        };

        const VISUAL_STYLES = [
            { id: 'pixar', name: 'Pixar', icon: 'ğŸ¬', price: 0 },
            { id: 'disney', name: 'Disney', icon: 'ğŸ°', price: 0 },
            { id: 'anime', name: 'Anime', icon: 'â­', price: 200 },
            { id: 'cartoon', name: 'Cartoon', icon: 'ğŸ“º', price: 200 },
            { id: 'realista', name: 'Realista', icon: 'ğŸ“·', price: 300 }
        ];

        const CHARACTERS = [
            { id: 'boy1', name: 'Menino', icon: 'ğŸ‘¦', price: 0 },
            { id: 'girl1', name: 'Menina', icon: 'ğŸ‘§', price: 0 },
            { id: 'boy2', name: 'Menino 2', icon: 'ğŸ‘¨', price: 100 },
            { id: 'girl2', name: 'Menina 2', icon: 'ğŸ‘©', price: 100 },
            { id: 'robot', name: 'RobÃ´', icon: 'ğŸ¤–', price: 300 },
            { id: 'alien', name: 'Alien', icon: 'ğŸ‘½', price: 400 },
            { id: 'cat', name: 'Gato', icon: 'ğŸ±', price: 250 },
            { id: 'dog', name: 'Cachorro', icon: 'ğŸ¶', price: 250 }
        ];

        const OUTFITS = [
            { id: 'casual', name: 'Casual', icon: 'ğŸ‘•', price: 0 },
            { id: 'formal', name: 'Formal', icon: 'ğŸ‘”', price: 100 },
            { id: 'sport', name: 'Esporte', icon: 'ğŸ½', price: 150 },
            { id: 'super', name: 'Super-herÃ³i', icon: 'ğŸ¦¸', price: 300 },
            { id: 'space', name: 'Espacial', icon: 'ğŸš€', price: 400 }
        ];

        const ACCESSORIES = [
            { id: 'none', name: 'Nenhum', icon: 'âŒ', price: 0 },
            { id: 'glasses', name: 'Ã“culos', icon: 'ğŸ‘“', price: 50 },
            { id: 'hat', name: 'ChapÃ©u', icon: 'ğŸ©', price: 100 },
            { id: 'crown', name: 'Coroa', icon: 'ğŸ‘‘', price: 300 },
            { id: 'wings', name: 'Asas', icon: 'ğŸ¦‹', price: 400 }
        ];

        const PHASES = [
            { id: 1, name: 'Palavras BÃ¡sicas I', type: 'words' },
            { id: 2, name: 'Palavras BÃ¡sicas II', type: 'words' },
            { id: 3, name: 'Palavras AvanÃ§adas', type: 'words' },
            { id: 4, name: 'Frases Simples I', type: 'phrases' },
            { id: 5, name: 'Frases Simples II', type: 'phrases' },
            { id: 6, name: 'ExpressÃµes', type: 'phrases' },
            { id: 7, name: 'DiÃ¡logo BÃ¡sico', type: 'dialogue' },
            { id: 8, name: 'DiÃ¡logo AvanÃ§ado', type: 'dialogue' },
            { id: 9, name: 'Conversa Fluente', type: 'conversation' }
        ];

        // Estado do jogo
        const gameState = {
            coins: 500,
            style: 'pixar',
            character: 'boy1',
            outfit: 'casual',
            accessory: 'none',
            ownedItems: {
                styles: ['pixar', 'disney'],
                characters: ['boy1', 'girl1'],
                outfits: ['casual'],
                accessories: ['none']
            },
            currentLanguage: null,
            currentProfession: null,
            currentPhase: 1,
            phaseProgress: {},
            score: 0,
            lives: 3,
            wordIndex: 0,
            conversationIndex: 0
        };

        // ===== INICIALIZAÃ‡ÃƒO =====
        function init() {
            loadProgress();
            updateCoinsDisplay();
            applyStyle();
        }

        function loadProgress() {
            const saved = localStorage.getItem('profissoesIdiomas');
            if (saved) {
                Object.assign(gameState, JSON.parse(saved));
            }
        }

        function saveProgress() {
            localStorage.setItem('profissoesIdiomas', JSON.stringify(gameState));
        }

        function updateCoinsDisplay() {
            document.querySelectorAll('.coins-amount, #start-coins, #shop-coins, #game-coins').forEach(el => {
                if (el) el.textContent = gameState.coins;
            });
        }

        function applyStyle() {
            document.body.className = `style-${gameState.style}`;
        }

        // ===== NAVEGAÃ‡ÃƒO =====
        function hideAll() {
            ['start-screen', 'customize-screen', 'shop-screen', 'language-screen',
             'profession-screen', 'phase-screen', 'game-screen', 'result-screen'].forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
        }

        function showStart() {
            hideAll();
            document.getElementById('start-screen').style.display = 'flex';
            updateCoinsDisplay();
        }

        function showCustomize() {
            hideAll();
            document.getElementById('customize-screen').style.display = 'flex';
            renderCustomization();
        }

        function showShop() {
            hideAll();
            document.getElementById('shop-screen').style.display = 'flex';
            updateCoinsDisplay();
            showShopCategory('characters');
        }

        function showLanguageSelect() {
            hideAll();
            document.getElementById('language-screen').style.display = 'flex';
            renderLanguages();
        }

        function showProfessionSelect() {
            hideAll();
            document.getElementById('profession-screen').style.display = 'flex';
            renderProfessions();
        }

        function showPhaseSelect() {
            hideAll();
            document.getElementById('phase-screen').style.display = 'flex';
            renderPhases();
        }

        function showInstructions() {
            document.getElementById('instructions-modal').style.display = 'flex';
        }

        function hideInstructions() {
            document.getElementById('instructions-modal').style.display = 'none';
        }

        // ===== CUSTOMIZAÃ‡ÃƒO =====
        function renderCustomization() {
            // Estilos
            const stylesContainer = document.getElementById('style-options');
            stylesContainer.innerHTML = '';
            VISUAL_STYLES.forEach(style => {
                const owned = gameState.ownedItems.styles.includes(style.id);
                const selected = gameState.style === style.id;
                stylesContainer.innerHTML += `
                    <div class="option-card ${selected ? 'selected' : ''} ${!owned ? 'locked' : ''}"
                         onclick="selectStyle('${style.id}')">
                        <div class="option-icon">${style.icon}</div>
                        <div class="option-name">${style.name}</div>
                        ${!owned ? `<div class="option-price">ğŸª™ ${style.price}</div>` : ''}
                    </div>
                `;
            });

            // Personagens
            const charsContainer = document.getElementById('character-options');
            charsContainer.innerHTML = '';
            CHARACTERS.forEach(char => {
                const owned = gameState.ownedItems.characters.includes(char.id);
                const selected = gameState.character === char.id;
                charsContainer.innerHTML += `
                    <div class="option-card ${selected ? 'selected' : ''} ${!owned ? 'locked' : ''}"
                         onclick="selectCharacter('${char.id}')">
                        <div class="option-icon">${char.icon}</div>
                        <div class="option-name">${char.name}</div>
                        ${!owned ? `<div class="option-price">ğŸª™ ${char.price}</div>` : ''}
                    </div>
                `;
            });

            // Roupas
            const outfitsContainer = document.getElementById('outfit-options');
            outfitsContainer.innerHTML = '';
            OUTFITS.forEach(outfit => {
                const owned = gameState.ownedItems.outfits.includes(outfit.id);
                const selected = gameState.outfit === outfit.id;
                outfitsContainer.innerHTML += `
                    <div class="option-card ${selected ? 'selected' : ''} ${!owned ? 'locked' : ''}"
                         onclick="selectOutfit('${outfit.id}')">
                        <div class="option-icon">${outfit.icon}</div>
                        <div class="option-name">${outfit.name}</div>
                        ${!owned ? `<div class="option-price">ğŸª™ ${outfit.price}</div>` : ''}
                    </div>
                `;
            });

            // AcessÃ³rios
            const accContainer = document.getElementById('accessory-options');
            accContainer.innerHTML = '';
            ACCESSORIES.forEach(acc => {
                const owned = gameState.ownedItems.accessories.includes(acc.id);
                const selected = gameState.accessory === acc.id;
                accContainer.innerHTML += `
                    <div class="option-card ${selected ? 'selected' : ''} ${!owned ? 'locked' : ''}"
                         onclick="selectAccessory('${acc.id}')">
                        <div class="option-icon">${acc.icon}</div>
                        <div class="option-name">${acc.name}</div>
                        ${!owned ? `<div class="option-price">ğŸª™ ${acc.price}</div>` : ''}
                    </div>
                `;
            });

            updatePreview();
        }

        function selectStyle(id) {
            if (gameState.ownedItems.styles.includes(id)) {
                gameState.style = id;
                applyStyle();
                renderCustomization();
                updatePreview();
            }
        }

        function selectCharacter(id) {
            if (gameState.ownedItems.characters.includes(id)) {
                gameState.character = id;
                renderCustomization();
            }
        }

        function selectOutfit(id) {
            if (gameState.ownedItems.outfits.includes(id)) {
                gameState.outfit = id;
                renderCustomization();
            }
        }

        function selectAccessory(id) {
            if (gameState.ownedItems.accessories.includes(id)) {
                gameState.accessory = id;
                renderCustomization();
            }
        }

        function updatePreview() {
            const char = CHARACTERS.find(c => c.id === gameState.character);
            const style = VISUAL_STYLES.find(s => s.id === gameState.style);
            document.getElementById('preview-char').textContent = char ? char.icon : 'ğŸ‘¤';

            let previewName = char ? char.name : 'Personagem';
            if (style) {
                previewName += ` (${style.name})`;
            }
            document.getElementById('preview-name').textContent = previewName;
        }

        function saveCustomization() {
            saveProgress();
            showStart();
        }

        // ===== LOJA =====
        function showShopCategory(category) {
            document.querySelectorAll('.shop-category').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const container = document.getElementById('shop-items');
            container.innerHTML = '';

            let items = [];
            let ownedList = [];

            switch(category) {
                case 'characters': items = CHARACTERS; ownedList = gameState.ownedItems.characters; break;
                case 'outfits': items = OUTFITS; ownedList = gameState.ownedItems.outfits; break;
                case 'accessories': items = ACCESSORIES; ownedList = gameState.ownedItems.accessories; break;
                case 'styles': items = VISUAL_STYLES; ownedList = gameState.ownedItems.styles; break;
            }

            items.forEach(item => {
                const owned = ownedList.includes(item.id);
                container.innerHTML += `
                    <div class="shop-item ${owned ? 'owned' : ''}" onclick="buyItem('${category}', '${item.id}', ${item.price})">
                        <div class="item-preview">${item.icon}</div>
                        <div class="item-name">${item.name}</div>
                        ${owned
                            ? '<div class="item-owned">âœ“ PossuÃ­do</div>'
                            : `<div class="item-price">ğŸª™ ${item.price}</div>`
                        }
                    </div>
                `;
            });
        }

        function buyItem(category, id, price) {
            const listKey = category === 'styles' ? 'styles' :
                            category === 'characters' ? 'characters' :
                            category === 'outfits' ? 'outfits' : 'accessories';

            if (gameState.ownedItems[listKey].includes(id)) {
                alert('VocÃª jÃ¡ possui este item!');
                return;
            }

            if (gameState.coins < price) {
                alert('Moedas insuficientes!');
                return;
            }

            gameState.coins -= price;
            gameState.ownedItems[listKey].push(id);
            saveProgress();
            updateCoinsDisplay();
            showShopCategory(category);
        }

        // ===== IDIOMAS =====
        function renderLanguages() {
            const container = document.getElementById('languages-container');
            container.innerHTML = '';
            LANGUAGES.forEach(lang => {
                container.innerHTML += `
                    <div class="language-card" onclick="selectLanguage('${lang.id}')">
                        <div class="language-flag">${lang.flag}</div>
                        <div class="language-name">${lang.name}</div>
                    </div>
                `;
            });
        }

        function selectLanguage(langId) {
            gameState.currentLanguage = langId;
            showProfessionSelect();
        }

        // ===== PROFISSÃ•ES =====
        function renderProfessions() {
            const lang = LANGUAGES.find(l => l.id === gameState.currentLanguage);
            document.getElementById('profession-lang-label').textContent = `Aprendendo em ${lang.name}`;

            const container = document.getElementById('professions-container');
            container.innerHTML = '';

            Object.entries(PROFESSIONS).forEach(([id, prof]) => {
                const wordCount = prof.words[gameState.currentLanguage]?.length || 0;
                container.innerHTML += `
                    <div class="profession-card" onclick="selectProfession('${id}')">
                        <div class="profession-icon">${prof.icon}</div>
                        <div class="profession-name">${prof.name.pt}</div>
                        <div class="profession-words">${wordCount} palavras</div>
                    </div>
                `;
            });
        }

        function selectProfession(profId) {
            gameState.currentProfession = profId;
            showPhaseSelect();
        }

        // ===== FASES =====
        function renderPhases() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const lang = LANGUAGES.find(l => l.id === gameState.currentLanguage);
            document.getElementById('phase-profession-label').textContent = `${prof.name.pt} - ${lang.name}`;

            const container = document.getElementById('phases-container');
            container.innerHTML = '';

            const progressKey = `${gameState.currentProfession}_${gameState.currentLanguage}`;
            const progress = gameState.phaseProgress[progressKey] || { unlockedPhase: 1, stars: {} };

            PHASES.forEach((phase, index) => {
                const unlocked = index < progress.unlockedPhase;
                const stars = progress.stars[phase.id] || 0;

                container.innerHTML += `
                    <div class="phase-card ${unlocked ? '' : 'locked'}" onclick="${unlocked ? `startPhase(${phase.id})` : ''}">
                        <div class="phase-number">${unlocked ? phase.id : 'ğŸ”’'}</div>
                        <div class="phase-name">${phase.name}</div>
                        <div class="phase-stars">${'â­'.repeat(stars)}${'â˜†'.repeat(3-stars)}</div>
                    </div>
                `;
            });
        }

        // ===== JOGO =====

        // Calcula quantas palavras/itens para cada fase
        // Cada fase tem palavras DIFERENTES (nÃ£o repetidas)
        // Fase 1: 7 palavras, Fase 2: 10 palavras, Fase 3: 15 palavras
        // Fase 4: 7 frases, Fase 5: 10 frases, Fase 6: 15 frases
        function getPhaseItems(phaseId) {
            const prof = PROFESSIONS[gameState.currentProfession];
            const phase = PHASES.find(p => p.id === phaseId);
            const lang = gameState.currentLanguage;

            if (phase.type === 'words') {
                const words = prof.words[lang] || prof.words.en || [];
                // Fase 1: 7 palavras (Ã­ndices 0-6)
                // Fase 2: 10 palavras (Ã­ndices 7-16)
                // Fase 3: 15 palavras (Ã­ndices 17-31)
                if (phaseId === 1) {
                    const items = words.slice(0, 7);
                    // Se nÃ£o tiver 7, repete algumas
                    while (items.length < 7 && words.length > 0) {
                        items.push(words[items.length % words.length]);
                    }
                    return items;
                }
                if (phaseId === 2) {
                    let items = words.slice(7, 17);
                    // Se nÃ£o tiver 10, usa palavras disponÃ­veis sem repetir fase 1
                    if (items.length < 10) {
                        const available = words.slice(7);
                        while (items.length < 10 && available.length > 0) {
                            items.push(available[items.length % available.length]);
                        }
                        // Se ainda nÃ£o tiver, usa do inÃ­cio
                        if (items.length < 10) {
                            items = words.slice(0, 10);
                        }
                    }
                    return items;
                }
                // Fase 3: 15 palavras
                let items = words.slice(17, 32);
                if (items.length < 15) {
                    // Usa todas as palavras disponÃ­veis
                    items = [...words];
                    while (items.length < 15 && words.length > 0) {
                        items.push(words[items.length % words.length]);
                    }
                }
                return items.slice(0, 15);
            } else if (phase.type === 'phrases') {
                const phrases = prof.phrases?.[lang] || prof.phrases?.en || [];
                // Fase 4: 7 frases, Fase 5: 10 frases, Fase 6: 15 frases
                if (phaseId === 4) {
                    const items = phrases.slice(0, 7);
                    while (items.length < 7 && phrases.length > 0) {
                        items.push(phrases[items.length % phrases.length]);
                    }
                    return items.length > 0 ? items : [{phrase: "Hello!", translation: "OlÃ¡!", image: "ğŸ‘‹"}];
                }
                if (phaseId === 5) {
                    let items = phrases.slice(7, 17);
                    if (items.length < 10) {
                        items = phrases.slice(0);
                        while (items.length < 10 && phrases.length > 0) {
                            items.push(phrases[items.length % phrases.length]);
                        }
                    }
                    return items.slice(0, 10);
                }
                // Fase 6: 15 frases
                let items = [...phrases];
                while (items.length < 15 && phrases.length > 0) {
                    items.push(phrases[items.length % phrases.length]);
                }
                return items.slice(0, 15);
            } else if (phase.type === 'dialogue') {
                return prof.dialogues?.[lang] || prof.dialogues?.en || [];
            } else {
                return prof.conversations?.[lang] || prof.conversations?.en || [];
            }
        }

        function startPhase(phaseId) {
            gameState.currentPhase = phaseId;
            gameState.score = 0;
            gameState.lives = 3;
            gameState.wordIndex = 0;
            gameState.conversationIndex = 0;
            gameState.dialogueIndex = 0;
            gameState.dialogueLineIndex = 0;
            gameState.totalItems = getPhaseItems(phaseId).length;

            hideAll();
            document.getElementById('game-screen').style.display = 'block';
            document.getElementById('game-phase').textContent = phaseId;
            updateGameHUD();
            updateStyleDisplay();

            const phase = PHASES.find(p => p.id === phaseId);

            if (phase.type === 'conversation') {
                renderConversation();
            } else if (phase.type === 'dialogue') {
                renderDialogue();
            } else if (phase.type === 'phrases') {
                renderPhraseLearning();
            } else {
                renderWordLearning();
            }
        }

        function updateGameHUD() {
            document.getElementById('game-score').textContent = gameState.score;
            document.getElementById('game-lives').textContent = gameState.lives;
            document.getElementById('game-coins').textContent = gameState.coins;

            // Atualizar progresso
            const current = gameState.wordIndex + 1;
            const total = gameState.totalItems || 1;
            document.getElementById('game-current').textContent = Math.min(current, total);
            document.getElementById('game-total').textContent = total;

            // Atualizar barra de progresso
            const progress = (gameState.wordIndex / total) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
        }

        function updateStyleDisplay() {
            const style = VISUAL_STYLES.find(s => s.id === gameState.style);
            if (style) {
                document.getElementById('style-icon').textContent = style.icon;
                document.getElementById('style-name').textContent = style.name;
            }
        }

        function renderWordLearning() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const allWords = prof.words[gameState.currentLanguage] || prof.words.en;
            const words = getPhaseItems(gameState.currentPhase);
            gameState.totalItems = words.length;

            if (gameState.wordIndex >= words.length) {
                endPhase(true);
                return;
            }

            const word = words[gameState.wordIndex];
            const lang = LANGUAGES.find(l => l.id === gameState.currentLanguage);

            // Atualizar HUD
            updateGameHUD();

            const content = document.getElementById('game-content');
            content.innerHTML = `
                <div class="teacher-area">
                    <div class="teacher-avatar">${prof.icon}</div>
                    <div class="teacher-speech">
                        <div class="speech-bubble">
                            <span class="word-highlight">${word.word}</span>
                            <br>
                            <small style="color: #666;">significa "${word.translation}" em portuguÃªs</small>
                        </div>
                        <button class="speak-btn" onclick="speakWord('${word.word.replace(/'/g, "\\'")}')">
                            ğŸ”Š Ouvir novamente
                        </button>
                    </div>
                </div>

                <div class="image-area">
                    <div class="word-image">${word.image}</div>
                    <div class="word-translation">${word.word}</div>
                    <div class="word-pronunciation">OuÃ§a e repita!</div>
                </div>

                <div class="quiz-area">
                    <div class="quiz-question">Como se diz "${word.translation}" em ${lang.name}?</div>
                    <div class="options-container" id="options-container">
                        <!-- OpÃ§Ãµes geradas dinamicamente -->
                    </div>
                </div>
            `;

            // Falar automaticamente ao entrar
            setTimeout(() => speakWord(word.word), 300);

            generateOptions(word, allWords);
        }

        function generateOptions(correctWord, allWords) {
            const options = [correctWord];

            // Adicionar opÃ§Ãµes erradas
            const wrongOptions = allWords.filter(w => w.word !== correctWord.word);
            while (options.length < 4 && wrongOptions.length > 0) {
                const randomIndex = Math.floor(Math.random() * wrongOptions.length);
                options.push(wrongOptions.splice(randomIndex, 1)[0]);
            }

            // Embaralhar
            options.sort(() => Math.random() - 0.5);

            const container = document.getElementById('options-container');
            container.innerHTML = '';

            options.forEach(opt => {
                const escapedWord = opt.word.replace(/'/g, "\\'");
                const escapedCorrect = correctWord.word.replace(/'/g, "\\'");
                container.innerHTML += `
                    <button class="option-btn" onclick="checkAnswer('${escapedWord}', '${escapedCorrect}', this)">
                        ${opt.image} ${opt.word}
                    </button>
                `;
            });
        }

        function checkAnswer(selected, correct, button) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = true);

            if (selected === correct) {
                button.classList.add('correct');
                gameState.score += 100;

                // Falar a resposta correta
                speakWord(correct);

                setTimeout(() => {
                    gameState.wordIndex++;
                    renderWordLearning();
                }, 2000); // Tempo maior para ouvir
            } else {
                button.classList.add('wrong');
                gameState.lives--;

                // Mostrar resposta correta
                buttons.forEach(btn => {
                    if (btn.textContent.includes(correct)) {
                        btn.classList.add('correct');
                    }
                });

                // Falar a resposta correta para aprender
                speakWord(correct);

                if (gameState.lives <= 0) {
                    setTimeout(() => endPhase(false), 1500);
                } else {
                    setTimeout(() => {
                        gameState.wordIndex++;
                        renderWordLearning();
                    }, 2000);
                }
            }

            updateGameHUD();
        }

        // ===== FRASES - Fases 4-6 =====
        function renderPhraseLearning() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const allPhrases = prof.phrases?.[gameState.currentLanguage] || prof.phrases?.en || [];
            const phrases = getPhaseItems(gameState.currentPhase);
            gameState.totalItems = phrases.length;

            if (phrases.length === 0) {
                // Fallback para palavras se nÃ£o houver frases
                renderWordLearning();
                return;
            }

            if (gameState.wordIndex >= phrases.length) {
                endPhase(true);
                return;
            }

            const phrase = phrases[gameState.wordIndex];
            const lang = LANGUAGES.find(l => l.id === gameState.currentLanguage);

            // Atualizar HUD
            updateGameHUD();

            const content = document.getElementById('game-content');
            content.innerHTML = `
                <div class="teacher-area">
                    <div class="teacher-avatar">${prof.icon}</div>
                    <div class="teacher-speech">
                        <div class="speech-bubble">
                            <span class="word-highlight" style="font-size: 20px;">${phrase.phrase}</span>
                            <br>
                            <small style="color: #666;">"${phrase.translation}"</small>
                        </div>
                        <button class="speak-btn" onclick="speakWord('${phrase.phrase.replace(/'/g, "\\'")}')">
                            ğŸ”Š Ouvir novamente
                        </button>
                    </div>
                </div>

                <div class="image-area">
                    <div class="word-image">${phrase.image}</div>
                    <div class="word-translation" style="font-size: 18px;">${phrase.phrase}</div>
                    <div class="word-pronunciation">${phrase.translation}</div>
                </div>

                <div class="quiz-area">
                    <div class="quiz-question">Qual Ã© a frase correta em ${lang.name}?</div>
                    <div class="options-container" id="options-container"></div>
                </div>
            `;

            // Falar automaticamente ao entrar
            setTimeout(() => speakWord(phrase.phrase), 300);

            generatePhraseOptions(phrase, allPhrases.length > 0 ? allPhrases : phrases);
        }

        function generatePhraseOptions(correctPhrase, allPhrases) {
            const options = [correctPhrase];

            const wrongOptions = allPhrases.filter(p => p.phrase !== correctPhrase.phrase);
            while (options.length < 4 && wrongOptions.length > 0) {
                const randomIndex = Math.floor(Math.random() * wrongOptions.length);
                options.push(wrongOptions.splice(randomIndex, 1)[0]);
            }

            options.sort(() => Math.random() - 0.5);

            const container = document.getElementById('options-container');
            container.innerHTML = '';

            options.forEach(opt => {
                const escapedPhrase = opt.phrase.replace(/'/g, "\\'");
                container.innerHTML += `
                    <button class="option-btn" style="font-size: 14px; text-align: left;" onclick="checkPhraseAnswer('${escapedPhrase}', '${correctPhrase.phrase.replace(/'/g, "\\'")}', this)">
                        ${opt.image} ${opt.phrase}
                    </button>
                `;
            });
        }

        function checkPhraseAnswer(selected, correct, button) {
            const buttons = document.querySelectorAll('.option-btn');
            buttons.forEach(btn => btn.disabled = true);

            if (selected === correct) {
                button.classList.add('correct');
                gameState.score += 150;
                speakWord(correct);

                setTimeout(() => {
                    gameState.wordIndex++;
                    renderPhraseLearning();
                }, 2500); // Tempo maior para ouvir a frase
            } else {
                button.classList.add('wrong');
                gameState.lives--;

                buttons.forEach(btn => {
                    if (btn.textContent.includes(correct.substring(0, 20))) {
                        btn.classList.add('correct');
                    }
                });

                // Falar a resposta correta para aprender
                speakWord(correct);

                if (gameState.lives <= 0) {
                    setTimeout(() => endPhase(false), 1500);
                } else {
                    setTimeout(() => {
                        gameState.wordIndex++;
                        renderPhraseLearning();
                    }, 2000);
                }
            }

            updateGameHUD();
        }

        // ===== DIÃLOGOS - Fases 7-8 =====
        function renderDialogue() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const dialogues = prof.dialogues?.[gameState.currentLanguage] || prof.dialogues?.en;

            if (!dialogues || dialogues.length === 0) {
                // Fallback para conversa se nÃ£o houver diÃ¡logos
                renderConversation();
                return;
            }

            const dialogue = dialogues[0]; // Usar primeiro diÃ¡logo

            const content = document.getElementById('game-content');
            content.innerHTML = `
                <div class="conversation-area">
                    <h2 class="conversation-title">ğŸ­ DiÃ¡logo: ${dialogue.context}</h2>
                    <div class="chat-container" id="chat-container"></div>
                    <div class="response-options" id="response-options"></div>
                </div>
            `;

            gameState.dialogueLineIndex = 0;
            showNextDialogueLine(dialogue);
        }

        function showNextDialogueLine(dialogue) {
            if (gameState.dialogueLineIndex >= dialogue.lines.length) {
                endPhase(true);
                return;
            }

            const line = dialogue.lines[gameState.dialogueLineIndex];
            const prof = PROFESSIONS[gameState.currentProfession];
            const chatContainer = document.getElementById('chat-container');
            const responseOptions = document.getElementById('response-options');

            const isProfessional = line.speaker === 'doctor' || line.speaker === 'police' ||
                                   line.speaker === 'chef' || line.speaker === 'teacher' ||
                                   line.speaker === 'firefighter' || line.speaker === 'pilot' ||
                                   line.speaker === 'vet' || line.speaker === 'engineer' ||
                                   line.speaker === 'architect' || line.speaker === 'farmer' ||
                                   line.speaker === 'seller' || line.speaker === 'guide' ||
                                   line.speaker === 'artisan' || line.speaker === 'collector';
            const avatar = isProfessional ? prof.icon : 'ğŸ§‘';

            if (line.isQuestion && line.options) {
                // Pergunta com opÃ§Ãµes
                responseOptions.innerHTML = '<p style="margin-bottom: 10px; opacity: 0.8;">Escolha a resposta correta:</p>';

                const shuffledOptions = [...line.options].sort(() => Math.random() - 0.5);
                shuffledOptions.forEach((opt, index) => {
                    const isCorrect = opt === line.options[0];
                    responseOptions.innerHTML += `
                        <button class="response-btn" onclick="selectDialogueResponse('${opt.replace(/'/g, "\\'")}', ${isCorrect}, this)">
                            <div class="response-text">${opt}</div>
                        </button>
                    `;
                });
            } else {
                // Mensagem automÃ¡tica
                chatContainer.innerHTML += `
                    <div class="chat-message ${isProfessional ? 'right' : 'left'}">
                        <div class="chat-avatar">${avatar}</div>
                        <div class="chat-bubble">
                            ${line.text}
                            <div class="chat-translation">${line.translation}</div>
                        </div>
                    </div>
                `;

                speakWord(line.text);
                chatContainer.scrollTop = chatContainer.scrollHeight;

                gameState.dialogueLineIndex++;
                setTimeout(() => {
                    const prof = PROFESSIONS[gameState.currentProfession];
                    const dialogues = prof.dialogues?.[gameState.currentLanguage] || prof.dialogues?.en;
                    showNextDialogueLine(dialogues[0]);
                }, 2000);
            }
        }

        function selectDialogueResponse(response, isCorrect, button) {
            const prof = PROFESSIONS[gameState.currentProfession];
            const chatContainer = document.getElementById('chat-container');
            const responseOptions = document.getElementById('response-options');

            // Desabilitar todos os botÃµes
            document.querySelectorAll('.response-btn').forEach(btn => btn.disabled = true);

            chatContainer.innerHTML += `
                <div class="chat-message right">
                    <div class="chat-avatar">${prof.icon}</div>
                    <div class="chat-bubble" style="${isCorrect ? '' : 'background: #e74c3c;'}">
                        ${response}
                    </div>
                </div>
            `;

            if (isCorrect) {
                gameState.score += 200;
                speakWord(response);
                button.style.background = 'rgba(76, 175, 80, 0.5)';
            } else {
                gameState.lives--;
                button.style.background = 'rgba(244, 67, 54, 0.5)';
                if (gameState.lives <= 0) {
                    setTimeout(() => endPhase(false), 1500);
                    return;
                }
            }

            updateGameHUD();
            responseOptions.innerHTML = '';

            gameState.dialogueLineIndex++;
            setTimeout(() => {
                const dialogues = prof.dialogues?.[gameState.currentLanguage] || prof.dialogues?.en;
                showNextDialogueLine(dialogues[0]);
            }, 1500);
        }

        function renderConversation() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const conv = prof.conversations?.[gameState.currentLanguage] || prof.conversations?.en;

            if (!conv) {
                endPhase(true);
                return;
            }

            const content = document.getElementById('game-content');
            content.innerHTML = `
                <div class="conversation-area">
                    <h2 class="conversation-title">ğŸ’¬ Conversa: ${prof.name.pt} e Cliente</h2>
                    <div class="chat-container" id="chat-container"></div>
                    <div class="response-options" id="response-options"></div>
                </div>
            `;

            gameState.conversationIndex = 0;
            showNextMessage();
        }

        function showNextMessage() {
            const prof = PROFESSIONS[gameState.currentProfession];
            const conv = prof.conversations?.[gameState.currentLanguage] || prof.conversations?.en;

            if (gameState.conversationIndex >= conv.length) {
                endPhase(true);
                return;
            }

            const msg = conv[gameState.conversationIndex];
            const chatContainer = document.getElementById('chat-container');
            const responseOptions = document.getElementById('response-options');

            const professionalSpeakers = ['doctor', 'chef', 'teacher', 'police', 'collector', 'guide', 'artisan', 'engineer', 'architect', 'farmer', 'seller', 'firefighter', 'pilot', 'vet'];
            const isProfessional = professionalSpeakers.includes(msg.speaker);
            const avatar = isProfessional ? prof.icon : 'ğŸ§‘';

            // Se Ã© mensagem do profissional com opÃ§Ãµes
            if (isProfessional && msg.options) {
                responseOptions.innerHTML = '';
                msg.options.forEach((opt, index) => {
                    responseOptions.innerHTML += `
                        <button class="response-btn" onclick="selectResponse(${index})">
                            <div class="response-text">${opt.text}</div>
                            <div class="response-translation">${opt.translation}</div>
                        </button>
                    `;
                });
            } else {
                // Mensagem automÃ¡tica
                chatContainer.innerHTML += `
                    <div class="chat-message ${isDoctor ? 'right' : 'left'}">
                        <div class="chat-avatar">${avatar}</div>
                        <div class="chat-bubble">
                            ${msg.text}
                            <div class="chat-translation">${msg.translation}</div>
                        </div>
                    </div>
                `;

                speakWord(msg.text);
                chatContainer.scrollTop = chatContainer.scrollHeight;

                gameState.conversationIndex++;
                setTimeout(showNextMessage, 2000);
            }
        }

        function selectResponse(index) {
            const prof = PROFESSIONS[gameState.currentProfession];
            const conv = prof.conversations?.[gameState.currentLanguage] || prof.conversations?.en;
            const msg = conv[gameState.conversationIndex];

            const selectedOption = msg.options[index];
            const isCorrect = index === 0; // Primeira opÃ§Ã£o Ã© sempre a correta

            const chatContainer = document.getElementById('chat-container');
            chatContainer.innerHTML += `
                <div class="chat-message right">
                    <div class="chat-avatar">${prof.icon}</div>
                    <div class="chat-bubble" style="${isCorrect ? '' : 'background: #e74c3c;'}">
                        ${selectedOption.text}
                        <div class="chat-translation">${selectedOption.translation}</div>
                    </div>
                </div>
            `;

            if (isCorrect) {
                gameState.score += 150;
                speakWord(selectedOption.text);
            } else {
                gameState.lives--;
                if (gameState.lives <= 0) {
                    setTimeout(() => endPhase(false), 1500);
                    return;
                }
            }

            updateGameHUD();
            document.getElementById('response-options').innerHTML = '';

            gameState.conversationIndex++;
            setTimeout(showNextMessage, 1500);
        }

        function speakWord(text) {
            if ('speechSynthesis' in window) {
                const lang = LANGUAGES.find(l => l.id === gameState.currentLanguage);
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang?.voice || 'en-US';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function endPhase(won) {
            const stars = won ? (gameState.lives === 3 ? 3 : gameState.lives === 2 ? 2 : 1) : 0;
            const coinsEarned = won ? (stars * 50 + gameState.currentPhase * 20) : 0;

            if (won) {
                gameState.coins += coinsEarned;

                const progressKey = `${gameState.currentProfession}_${gameState.currentLanguage}`;
                if (!gameState.phaseProgress[progressKey]) {
                    gameState.phaseProgress[progressKey] = { unlockedPhase: 1, stars: {} };
                }

                const progress = gameState.phaseProgress[progressKey];
                if (!progress.stars[gameState.currentPhase] || progress.stars[gameState.currentPhase] < stars) {
                    progress.stars[gameState.currentPhase] = stars;
                }

                if (gameState.currentPhase >= progress.unlockedPhase && gameState.currentPhase < 9) {
                    progress.unlockedPhase = gameState.currentPhase + 1;
                }

                saveProgress();
            }

            document.getElementById('result-title').textContent = won ? 'ğŸ‰ ParabÃ©ns!' : 'ğŸ˜¢ Tente novamente!';
            document.getElementById('result-stars').textContent = 'â­'.repeat(stars) + 'â˜†'.repeat(3 - stars);
            document.getElementById('result-score').textContent = gameState.score;
            document.getElementById('result-coins').textContent = coinsEarned;

            document.getElementById('btn-next-phase').style.display = (won && gameState.currentPhase < 9) ? 'block' : 'none';

            hideAll();
            document.getElementById('result-screen').style.display = 'flex';
        }

        function retryPhase() {
            startPhase(gameState.currentPhase);
        }

        function nextPhase() {
            if (gameState.currentPhase < 9) {
                startPhase(gameState.currentPhase + 1);
            }
        }

        // Inicializar
        window.onload = init;
    </script>
</body>
</html>
