<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Miss√µes Semanais - EAI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: white;
            overflow-x: hidden;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header h1 span {
            color: #ffd700;
        }

        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 15px;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #ffd700;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .week-progress {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .day-badge {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
        }

        .day-badge.completed {
            background: linear-gradient(135deg, #00b894, #55efc4);
            border-color: #00b894;
        }

        .day-badge.current {
            background: linear-gradient(135deg, #ffd700, #f39c12);
            border-color: #ffd700;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .medals {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }

        .medal {
            font-size: 2rem;
            opacity: 0.3;
            transition: all 0.3s ease;
        }

        .medal.earned {
            opacity: 1;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.3); }
        }

        .game-area {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .mission-card {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            text-align: center;
        }

        .mission-card .emoji {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .mission-card .title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .mission-card .description {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .mission-card .reward {
            background: rgba(255,215,0,0.3);
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
        }

        .missions-list {
            display: grid;
            gap: 15px;
        }

        .mission-item {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .mission-item:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }

        .mission-item.completed {
            background: rgba(0, 184, 148, 0.2);
            border-color: #00b894;
        }

        .mission-item.completed .mission-checkbox {
            background: #00b894;
        }

        .mission-checkbox {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 3px solid rgba(255,255,255,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .mission-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
        }

        .mission-content {
            flex: 1;
        }

        .mission-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .mission-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .mission-points {
            background: rgba(255,215,0,0.2);
            padding: 8px 15px;
            border-radius: 15px;
            font-weight: bold;
            color: #ffd700;
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .category-tab {
            padding: 10px 20px;
            border-radius: 25px;
            background: rgba(255,255,255,0.1);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .category-tab:hover {
            background: rgba(255,255,255,0.2);
        }

        .category-tab.active {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
        }

        .streak-bonus {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .streak-bonus h3 {
            margin-bottom: 5px;
        }

        .streak-bonus p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .celebration.show {
            display: flex;
        }

        .celebration-content {
            text-align: center;
            animation: celebrateIn 0.5s ease;
        }

        @keyframes celebrateIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .celebration-content .emoji {
            font-size: 6rem;
            margin-bottom: 20px;
        }

        .celebration-content h2 {
            font-size: 2rem;
            color: #ffd700;
            margin-bottom: 15px;
        }

        .celebration-content p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .close-btn {
            padding: 15px 40px;
            background: linear-gradient(135deg, #00b894, #55efc4);
            border: none;
            border-radius: 30px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            transform: scale(1.05);
        }

        .daily-challenge {
            background: linear-gradient(135deg, #ffd700, #f39c12);
            color: #1a1a2e;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .daily-challenge h3 {
            margin-bottom: 10px;
        }

        .daily-challenge .emoji {
            font-size: 3rem;
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.5rem;
            }

            .day-badge {
                width: 35px;
                height: 35px;
                font-size: 0.8rem;
            }

            .mission-card .emoji {
                font-size: 3rem;
            }

            .mission-item {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Miss√µes <span>Semanais</span></h1>
            <p>Complete desafios e ganhe recompensas!</p>
        </div>

        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Pontos</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="missions">0</div>
                <div class="stat-label">Miss√µes</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="streak">0</div>
                <div class="stat-label">Dias Seguidos</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="level">1</div>
                <div class="stat-label">N√≠vel</div>
            </div>
        </div>

        <div class="week-progress" id="weekProgress">
            <div class="day-badge">D</div>
            <div class="day-badge">S</div>
            <div class="day-badge">T</div>
            <div class="day-badge">Q</div>
            <div class="day-badge">Q</div>
            <div class="day-badge">S</div>
            <div class="day-badge">S</div>
        </div>

        <div class="medals">
            <span class="medal" id="medal1" title="Primeiro Dia">ü•â</span>
            <span class="medal" id="medal2" title="Uma Semana">ü•à</span>
            <span class="medal" id="medal3" title="Duas Semanas">ü•á</span>
            <span class="medal" id="medal4" title="Um M√™s">üèÜ</span>
            <span class="medal" id="medal5" title="Superstar">üëë</span>
        </div>

        <div class="game-area">
            <div class="daily-challenge" id="dailyChallenge">
                <span class="emoji">‚≠ê</span>
                <h3>Desafio do Dia</h3>
                <p id="dailyChallengeText">Carregando...</p>
            </div>

            <div id="streakBonus" class="streak-bonus" style="display: none;">
                <h3>üî• B√¥nus de Sequ√™ncia!</h3>
                <p>Voc√™ est√° jogando h√° <span id="streakDays">0</span> dias seguidos! +50 pontos extras!</p>
            </div>

            <div class="category-tabs">
                <button class="category-tab active" onclick="filterMissions('all')">Todas</button>
                <button class="category-tab" onclick="filterMissions('study')">üìö Estudo</button>
                <button class="category-tab" onclick="filterMissions('health')">üí™ Sa√∫de</button>
                <button class="category-tab" onclick="filterMissions('social')">üë• Social</button>
                <button class="category-tab" onclick="filterMissions('creative')">üé® Criativo</button>
            </div>

            <div class="missions-list" id="missionsList"></div>
        </div>

        <div class="celebration" id="celebration">
            <div class="celebration-content">
                <div class="emoji" id="celebrationEmoji">üéâ</div>
                <h2 id="celebrationTitle">Miss√£o Completa!</h2>
                <p id="celebrationText">Voc√™ ganhou pontos!</p>
                <button class="close-btn" onclick="closeCelebration()">Continuar</button>
            </div>
        </div>
    </div>

    <script>
        // Miss√µes dispon√≠veis
        const allMissions = [
            // Estudo
            { id: 1, emoji: 'üìñ', title: 'Ler por 15 minutos', desc: 'Leia um livro ou hist√≥ria por 15 minutos', points: 20, category: 'study' },
            { id: 2, emoji: '‚úèÔ∏è', title: 'Praticar escrita', desc: 'Escreva 5 frases sobre seu dia', points: 15, category: 'study' },
            { id: 3, emoji: 'üî¢', title: 'Matem√°tica divertida', desc: 'Resolva 10 contas de matem√°tica', points: 20, category: 'study' },
            { id: 4, emoji: 'üéÆ', title: 'Jogar um jogo educativo', desc: 'Jogue um dos jogos da plataforma EAI', points: 25, category: 'study' },
            { id: 5, emoji: 'üó£Ô∏è', title: 'Aprender 3 palavras novas', desc: 'Descubra o significado de 3 palavras novas', points: 15, category: 'study' },

            // Sa√∫de
            { id: 6, emoji: 'üèÉ', title: 'Brincar ao ar livre', desc: 'Passe 30 minutos brincando fora de casa', points: 25, category: 'health' },
            { id: 7, emoji: 'üíß', title: 'Beber √°gua', desc: 'Beba pelo menos 6 copos de √°gua hoje', points: 10, category: 'health' },
            { id: 8, emoji: 'üçé', title: 'Comer frutas', desc: 'Coma pelo menos 2 frutas diferentes', points: 15, category: 'health' },
            { id: 9, emoji: 'üò¥', title: 'Dormir cedo', desc: 'V√° dormir no hor√°rio certo', points: 20, category: 'health' },
            { id: 10, emoji: 'üßò', title: 'Alongamento', desc: 'Fa√ßa 5 minutos de alongamento', points: 10, category: 'health' },

            // Social
            { id: 11, emoji: 'üëã', title: 'Cumprimentar pessoas', desc: 'Diga "bom dia" para 5 pessoas', points: 10, category: 'social' },
            { id: 12, emoji: 'ü§ù', title: 'Ajudar algu√©m', desc: 'Ajude um colega ou familiar com algo', points: 25, category: 'social' },
            { id: 13, emoji: 'üí¨', title: 'Conversar com a fam√≠lia', desc: 'Converse sobre seu dia com sua fam√≠lia', points: 15, category: 'social' },
            { id: 14, emoji: 'üéÅ', title: 'Fazer um elogio', desc: 'Fa√ßa um elogio sincero a algu√©m', points: 15, category: 'social' },
            { id: 15, emoji: 'üìû', title: 'Falar com um amigo', desc: 'Converse com um amigo pessoalmente ou por telefone', points: 15, category: 'social' },

            // Criativo
            { id: 16, emoji: 'üé®', title: 'Fazer um desenho', desc: 'Desenhe algo que voc√™ gosta', points: 20, category: 'creative' },
            { id: 17, emoji: 'üéµ', title: 'Cantar uma m√∫sica', desc: 'Cante sua m√∫sica favorita', points: 10, category: 'creative' },
            { id: 18, emoji: 'üèóÔ∏è', title: 'Construir algo', desc: 'Monte algo com blocos, lego ou papel', points: 20, category: 'creative' },
            { id: 19, emoji: 'üìù', title: 'Escrever uma hist√≥ria', desc: 'Crie uma hist√≥ria curta', points: 25, category: 'creative' },
            { id: 20, emoji: 'üé≠', title: 'Fazer uma encena√ß√£o', desc: 'Invente uma pe√ßa de teatro ou m√≠mica', points: 20, category: 'creative' }
        ];

        // Desafios di√°rios
        const dailyChallenges = [
            { emoji: 'üåü', text: 'Complete 3 miss√µes de categorias diferentes!' },
            { emoji: 'üìö', text: 'Foque nos estudos: complete 2 miss√µes de estudo!' },
            { emoji: 'üí™', text: 'Dia saud√°vel: complete 3 miss√µes de sa√∫de!' },
            { emoji: 'ü§ó', text: 'Seja social: complete 2 miss√µes sociais!' },
            { emoji: 'üé®', text: 'Seja criativo: complete 2 miss√µes criativas!' },
            { emoji: '‚ö°', text: 'Super dia: complete 5 miss√µes!' },
            { emoji: 'üéØ', text: 'Complete todas as miss√µes do dia!' }
        ];

        // Estado do jogo
        let gameState = {
            score: 0,
            level: 1,
            streak: 0,
            missionsCompleted: [],
            todayMissions: [],
            lastPlayDate: null,
            totalMissionsCompleted: 0
        };

        let currentFilter = 'all';

        // Fun√ß√µes de √°udio
        function playSound(type) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            switch(type) {
                case 'complete':
                    oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                    gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.4);
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + 0.4);
                    break;
                case 'levelup':
                    const freqs = [523.25, 659.25, 783.99, 1046.50];
                    freqs.forEach((freq, i) => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        osc.frequency.setValueAtTime(freq, audioContext.currentTime + i * 0.1);
                        gain.gain.setValueAtTime(0.1, audioContext.currentTime + i * 0.1);
                        gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.1 + 0.2);
                        osc.start(audioContext.currentTime + i * 0.1);
                        osc.stop(audioContext.currentTime + i * 0.1 + 0.2);
                    });
                    break;
            }
        }

        // Carregar progresso
        function loadProgress() {
            const saved = localStorage.getItem('missoesSemanaisProgress');
            if (saved) {
                const data = JSON.parse(saved);
                gameState = { ...gameState, ...data };
            }

            checkNewDay();
            updateDisplay();
            updateMedals();
            updateWeekProgress();
            renderMissions();
            renderDailyChallenge();
        }

        // Verificar novo dia
        function checkNewDay() {
            const today = new Date().toDateString();

            if (gameState.lastPlayDate !== today) {
                // Verificar streak
                const yesterday = new Date();
                yesterday.setDate(yesterday.getDate() - 1);

                if (gameState.lastPlayDate === yesterday.toDateString()) {
                    gameState.streak++;
                } else if (gameState.lastPlayDate !== null) {
                    gameState.streak = 1;
                } else {
                    gameState.streak = 1;
                }

                gameState.lastPlayDate = today;
                gameState.todayMissions = [];

                // Selecionar miss√µes do dia (8 aleat√≥rias)
                const shuffled = [...allMissions].sort(() => Math.random() - 0.5);
                gameState.todayMissions = shuffled.slice(0, 8).map(m => m.id);

                saveProgress();
            }

            // Mostrar b√¥nus de streak
            if (gameState.streak >= 3) {
                document.getElementById('streakBonus').style.display = 'block';
                document.getElementById('streakDays').textContent = gameState.streak;
            }
        }

        // Salvar progresso
        function saveProgress() {
            localStorage.setItem('missoesSemanaisProgress', JSON.stringify(gameState));
        }

        // Atualizar display
        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('missions').textContent = gameState.totalMissionsCompleted;
        }

        // Atualizar medalhas
        function updateMedals() {
            const medals = [
                { id: 'medal1', threshold: 1 },
                { id: 'medal2', threshold: 7 },
                { id: 'medal3', threshold: 14 },
                { id: 'medal4', threshold: 30 },
                { id: 'medal5', threshold: 100 }
            ];

            medals.forEach(medal => {
                const el = document.getElementById(medal.id);
                if (gameState.streak >= medal.threshold || gameState.totalMissionsCompleted >= medal.threshold * 3) {
                    el.classList.add('earned');
                }
            });
        }

        // Atualizar progresso da semana
        function updateWeekProgress() {
            const days = document.querySelectorAll('.day-badge');
            const today = new Date().getDay();

            days.forEach((day, index) => {
                day.classList.remove('completed', 'current');

                if (index < today || (index === 0 && today === 0)) {
                    if (gameState.streak >= (today - index) || today === 0) {
                        day.classList.add('completed');
                    }
                }

                if (index === today) {
                    day.classList.add('current');
                }
            });
        }

        // Renderizar desafio di√°rio
        function renderDailyChallenge() {
            const dayIndex = new Date().getDay();
            const challenge = dailyChallenges[dayIndex];
            document.getElementById('dailyChallengeText').textContent = challenge.text;
            document.querySelector('.daily-challenge .emoji').textContent = challenge.emoji;
        }

        // Filtrar miss√µes
        function filterMissions(category) {
            currentFilter = category;
            document.querySelectorAll('.category-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            renderMissions();
        }

        // Renderizar miss√µes
        function renderMissions() {
            const container = document.getElementById('missionsList');
            container.innerHTML = '';

            let missions = allMissions.filter(m => gameState.todayMissions.includes(m.id));

            if (currentFilter !== 'all') {
                missions = missions.filter(m => m.category === currentFilter);
            }

            missions.forEach(mission => {
                const isCompleted = gameState.missionsCompleted.includes(mission.id);

                const item = document.createElement('div');
                item.className = `mission-item ${isCompleted ? 'completed' : ''}`;
                item.innerHTML = `
                    <div class="mission-checkbox ${isCompleted ? 'checked' : ''}"></div>
                    <div class="mission-content">
                        <div class="mission-title">${mission.emoji} ${mission.title}</div>
                        <div class="mission-desc">${mission.desc}</div>
                    </div>
                    <div class="mission-points">+${mission.points}</div>
                `;

                if (!isCompleted) {
                    item.onclick = () => completeMission(mission);
                }

                container.appendChild(item);
            });
        }

        // Completar miss√£o
        function completeMission(mission) {
            if (gameState.missionsCompleted.includes(mission.id)) return;

            playSound('complete');

            gameState.missionsCompleted.push(mission.id);
            gameState.score += mission.points;
            gameState.totalMissionsCompleted++;

            // B√¥nus de streak
            if (gameState.streak >= 3) {
                gameState.score += 10;
            }

            // Level up
            const newLevel = Math.floor(gameState.score / 200) + 1;
            if (newLevel > gameState.level) {
                gameState.level = newLevel;
                playSound('levelup');
            }

            updateDisplay();
            updateMedals();
            saveProgress();
            renderMissions();

            // Mostrar celebra√ß√£o
            showCelebration(mission);
        }

        // Mostrar celebra√ß√£o
        function showCelebration(mission) {
            document.getElementById('celebrationEmoji').textContent = mission.emoji;
            document.getElementById('celebrationTitle').textContent = 'Miss√£o Completa!';
            document.getElementById('celebrationText').textContent = `Voc√™ completou "${mission.title}" e ganhou ${mission.points} pontos!`;
            document.getElementById('celebration').classList.add('show');
        }

        // Fechar celebra√ß√£o
        function closeCelebration() {
            document.getElementById('celebration').classList.remove('show');
        }

        // Inicializar
        loadProgress();
    </script>
</body>
</html>
